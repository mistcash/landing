"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{9105:(e,t,n)=>{n.d(t,{iN:()=>aI});var r=n(9934),a=n(4930),i=n(8792),s=n(2316),o=n(5916),c=n(2074),l=n(6802),u=n(6024),d=n(9823),h=n(740),p=n(8138),f=n(1523),g=n(3598),m=n(7252),y=n(2886),_=n(9933);n(1465).hp;var E=Object.defineProperty,b=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,A=Object.prototype.hasOwnProperty,I=(e,t)=>{for(var n in t)E(e,n,{get:t[n],enumerable:!0})};I({},{ADDR_BOUND:()=>ec,API_VERSION:()=>ei,BaseUrl:()=>ep,FeeMarginPercentage:()=>ey,HARDENING_4BYTES:()=>ek,HARDENING_BYTE:()=>ev,IS_BROWSER:()=>H,MASK_250:()=>er,MASK_31:()=>ea,MAX_STORAGE_ITEM_SIZE:()=>eo,NetworkName:()=>ef,OutsideExecutionCallerAny:()=>eT,PRIME:()=>es,RANGE_FELT:()=>eu,RANGE_I128:()=>ed,RANGE_U128:()=>eh,RPC_DEFAULT_VERSION:()=>eE,RPC_NODES:()=>eb,SNIP9_V1_INTERFACE_ID:()=>eA,SNIP9_V2_INTERFACE_ID:()=>eI,StarknetChainId:()=>eg,TEXT_TO_FELT_MAX_LEN:()=>et,TRANSACTION_VERSION:()=>v.ETransactionVersion,TransactionHashPrefix:()=>em,UDC:()=>e_,ZERO:()=>en});var v={};I(v,{JRPC:()=>k,RPCSPEC06:()=>S,RPCSPEC07:()=>r});var k={},S={};I(S,{EBlockTag:()=>R,EDAMode:()=>P,EDataAvailabilityMode:()=>V,ESimulationFlag:()=>O,ETransactionExecutionStatus:()=>B,ETransactionFinalityStatus:()=>D,ETransactionStatus:()=>x,ETransactionType:()=>N,ETransactionVersion:()=>L,ETransactionVersion2:()=>M,ETransactionVersion3:()=>F,Errors:()=>w,SPEC:()=>C});var w={},C={},N={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},O={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},x={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},D={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},B={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},R={PENDING:"pending",LATEST:"latest"},V={L1:"L1",L2:"L2"},P={L1:0,L2:1},L={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},M={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},F={V3:"0x3",F3:"0x100000000000000000000000000000003"};((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of T(t))A.call(e,a)||a===n||E(e,a,{get:()=>t[a],enumerable:!(r=b(t,a))||r.enumerable});return})(v,r,"default"),I({},{IS_BROWSER:()=>H,addHexPrefix:()=>G,arrayBufferToString:()=>$,atobUniversal:()=>K,btoaUniversal:()=>q,buf2hex:()=>Y,calcByteLength:()=>J,concatenateArrayBuffer:()=>ee,padLeft:()=>X,pascalToSnake:()=>Q,removeHexPrefix:()=>W,sanitizeBytes:()=>Z,sanitizeHex:()=>z,stringToArrayBuffer:()=>j,utf8ToArray:()=>U});var H="undefined"!=typeof window;function $(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function U(e){return new TextEncoder().encode(e)}function j(e){return U(e)}function K(e){return i.K3.decode(e)}function q(e){return i.K3.encode(new Uint8Array(e))}function Y(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function W(e){return e.replace(/^0x/i,"")}function G(e){return`0x${W(e)}`}function X(e,t,n="0"){return function(e,t,n,r="0"){let a=t-e.length,i=e;if(a>0){let t=r.repeat(a);i=n?t+e:e+t}return i}(e,t,!0,n)}function J(e,t=8){let{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function Z(e,t=8,n="0"){return X(e,J(e,t),n)}function z(e){let t=Z(W(e),2);return t?G(t):t}var Q=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function ee(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),n=0;return e.forEach(e=>{t.set(e,n),n+=e.byteLength}),t}var et=31,en=0n,er=2n**250n-1n,ea=2n**31n-1n,ei=en,es=2n**251n+17n*2n**192n+1n,eo=256n,ec=2n**251n-eo,el=(e,t)=>({min:e,max:t}),eu=el(en,es-1n),ed=el(-(2n**127n),2n**127n-1n),eh=el(en,2n**128n-1n),ep=(e=>(e.SN_MAIN="https://alpha-mainnet.starknet.io",e.SN_SEPOLIA="https://alpha-sepolia.starknet.io",e))(ep||{}),ef=(e=>(e.SN_MAIN="SN_MAIN",e.SN_SEPOLIA="SN_SEPOLIA",e))(ef||{}),eg=(e=>(e.SN_MAIN="0x534e5f4d41494e",e.SN_SEPOLIA="0x534e5f5345504f4c4941",e))(eg||{}),em=(e=>(e.DECLARE="0x6465636c617265",e.DEPLOY="0x6465706c6f79",e.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",e.INVOKE="0x696e766f6b65",e.L1_HANDLER="0x6c315f68616e646c6572",e))(em||{}),ey=(e=>(e[e.L1_BOUND_MAX_AMOUNT=50]="L1_BOUND_MAX_AMOUNT",e[e.L1_BOUND_MAX_PRICE_PER_UNIT=50]="L1_BOUND_MAX_PRICE_PER_UNIT",e[e.MAX_FEE=50]="MAX_FEE",e))(ey||{}),e_={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},eE="v0_7",eb={SN_MAIN:[`https://starknet-mainnet.public.blastapi.io/rpc/${eE}`,`https://free-rpc.nethermind.io/mainnet-juno/${eE}`],SN_SEPOLIA:[`https://starknet-sepolia.public.blastapi.io/rpc/${eE}`,`https://free-rpc.nethermind.io/sepolia-juno/${eE}`]},eT="0x414e595f43414c4c4552",eA="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",eI="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",ev=128,ek=2147483648n,eS={};I(eS,{RpcChannel:()=>rF}),I({},{parse:()=>eC,parseAlwaysAsBig:()=>eN,stringify:()=>eO,stringifyAlwaysAsBig:()=>ex});var ew=e=>{if(!s.Fq(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},eC=e=>s.qg(String(e),void 0,ew),eN=e=>s.qg(String(e),void 0,s.z3),eO=(e,t,n,r)=>s.As(e,t,n,r),ex=eO,eD={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_MAX_FEE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63},eB=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){let{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){let{captureStackTrace:n}=Error;n&&n(e,t)}(this)}},eR=class extends eB{},eV=class extends eR{constructor(e,t,n){super(`RPC: ${t} with params ${eO(n,null,2)}

      ${e.code}: ${e.message}: ${eO(e.data)}`),this.baseError=e,this.request={method:t,params:n}}request;get code(){return this.baseError.code}isType(e){return eD[e]===this.code}};I({},{BlockStatus:()=>e$,BlockTag:()=>eU,ETH_ADDRESS:()=>eY,EntryPointType:()=>eP,Literal:()=>eq,NON_ZERO_PREFIX:()=>eW,OutsideExecutionTypesV1:()=>eG,OutsideExecutionTypesV2:()=>eX,OutsideExecutionVersion:()=>eJ,RPC:()=>v,TransactionExecutionStatus:()=>eH,TransactionFinalityStatus:()=>eF,TransactionStatus:()=>eM,TransactionType:()=>eL,TypedDataRevision:()=>o.K,Uint:()=>eK,ValidateType:()=>ej});var eP={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},eL={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},eM={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",REJECTED:"REJECTED",REVERTED:"REVERTED"},eF={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},eH={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},e$={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},eU={PENDING:"pending",LATEST:"latest"},ej={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},eK={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},eq={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},eY="core::starknet::eth_address::EthAddress",eW="core::zeroable::NonZero::",eG={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},eX={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},eJ=(e=>(e.UNSUPPORTED="0",e.V1="1",e.V2="2",e))(eJ||{}),eZ=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;constructor(e){this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,n){let r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e,params:t??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:eO(e),headers:this.headers})).json()}async fetch(e,t,n){let r=this.addPendingRequest(e,t,n);await this.wait();let a=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){let e=this.sendBatch(Object.values(a));Object.keys(a).forEach(t=>{this.batchPromises[t]=e})}let i=await this.batchPromises[r];delete this.batchPromises[r];let s=i.find(e=>e.id===r);if(!s)throw Error(`Couldn't find the result for the request. Method: ${e}`);return s}};function ez(e,t){if(!e)throw Error(t||"Assertion failure")}I({},{addPercent:()=>th,assertInRange:()=>tr,bigNumberishArrayToDecimalStringArray:()=>ta,bigNumberishArrayToHexadecimalStringArray:()=>ti,cleanHex:()=>tn,getDecimalString:()=>to,getHexString:()=>tc,getHexStringArray:()=>tl,hexToBytes:()=>td,hexToDecimalString:()=>tt,isBigNumberish:()=>tf,isHex:()=>e4,isStringWholeNumber:()=>ts,stringToSha256ToArrayBuff4:()=>tp,toBigInt:()=>e3,toCairoBool:()=>tu,toHex:()=>e8,toHex64:()=>te,toHexString:()=>e9,toStorageKey:()=>e7});var eQ=e=>void 0===e||void 0===e;function e0(e){return"number"==typeof e}function e1(e){return"boolean"==typeof e}function e2(e){return"bigint"==typeof e}function e5(e){return"string"==typeof e}function e6(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function e4(e){return/^0x[0-9a-f]*$/i.test(e)}function e3(e){return BigInt(e)}function e8(e){return G(e3(e).toString(16))}var e9=e8;function e7(e){return G(e3(e).toString(16).padStart(64,"0"))}function te(e){let t=G(e3(e).toString(16).padStart(64,"0"));if(66!==t.length)throw TypeError("number is too big for hex 0x(64) representation");return t}function tt(e){return BigInt(G(e)).toString(10)}function tn(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function tr(e,t,n,r=""){let a=""===r?"invalid length":`invalid ${r} length`,i=BigInt(e),s=BigInt(t),o=BigInt(n);ez(i>=s&&i<=o,`Message not signable, ${a}.`)}function ta(e){return e.map(e=>e3(e).toString(10))}function ti(e){return e.map(e=>e8(e))}function ts(e){return/^\d+$/.test(e)}function to(e){if(e4(e))return tt(e);if(ts(e))return e;throw Error(`${e} needs to be a hex-string or whole-number-string`)}function tc(e){if(e4(e))return e;if(ts(e))return e9(e);throw Error(`${e} needs to be a hex-string or whole-number-string`)}function tl(e){return e.map(tc)}function tu(e){return(+e).toString()}function td(e){if(!e4(e))throw Error(`${e} needs to be a hex-string`);let t=W(e);return t.length%2!=0&&(t=`0${t}`),(0,c.aT)(t)}function th(e,t){let n=BigInt(e);return n+n*BigInt(t)/100n}function tp(e){return td(e8(Number(BigInt(G(Y((0,l.sc)(e))))&ea)))}function tf(e){return e0(e)||e2(e)||e5(e)&&(e4(e)||ts(e))}function tg(e){let t=W(e8(BigInt(e))),n=t.length%2==0?t:`0${t}`;return G((0,u.keccak)(td(G(n))).toString(16))}function tm(e){return BigInt(G((0,u.keccak)(U(e)).toString(16)))&er}function ty(e){return e8(tm(e))}function t_(e){return e0(e)||e2(e)?e8(e):e4(e)?e:ts(e)?e8(e):ty(e)}function tE(e){let t=G(e.reduce((e,t)=>e+W(e8(t)).padStart(64,"0"),""));return G((0,c.My)((0,d.lY)(td(t))))}function tb(e,t,n,r,a){return tE([e,t,a,n,r.length,...r])}function tT(e){return/^[\x00-\x7F]*$/.test(e)}function tA(e){return e.length<=et}function tI(e){return/^[0-9]*$/i.test(e)}function tv(e){return e5(e)&&!e4(e)&&!ts(e)}I({},{getL2MessageHash:()=>tb,getSelector:()=>t_,getSelectorFromName:()=>ty,keccakBn:()=>tg,solidityUint256PackedKeccak256:()=>tE,starknetKeccak:()=>tm}),I({},{decodeShortString:()=>tN,encodeShortString:()=>tC,isASCII:()=>tT,isDecimalString:()=>tI,isLongText:()=>tS,isShortString:()=>tA,isShortText:()=>tk,isText:()=>tv,splitLongString:()=>tw});var tk=e=>tv(e)&&tA(e),tS=e=>tv(e)&&!tA(e);function tw(e){let t=RegExp(`[^]{1,${et}}`,"g");return e.match(t)||[]}function tC(e){if(!tT(e))throw Error(`${e} is not an ASCII string`);if(!tA(e))throw Error(`${e} is too long`);return G(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function tN(e){if(!tT(e))throw Error(`${e} is not an ASCII string`);if(e4(e))return W(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(tI(e))return tN("0X".concat(BigInt(e).toString(16)));throw Error(`${e} is not Hex or decimal`)}function tO(e){let t=0n===BigInt(e.pending_word)?"":tN(e8(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":tN(e8(t))),"")+t}function tx(e){let t=tw(e),n=t[t.length-1],r=t.map(tC),[a,i]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:a,pending_word_len:i}}function tD(e){if(e2(e)||Number.isInteger(e))return e.toString();if(e5(e)){if(e4(e))return BigInt(e).toString();if(tv(e)){if(!tA(e))throw Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(tC(e)).toString()}if(ts(e))return e}if(e1(e))return`${+e}`;throw Error(`${e} can't be computed by felt()`)}I({},{byteArrayFromString:()=>tx,stringFromByteArray:()=>tO}),I({},{felt:()=>nt,getAbiContractVersion:()=>t8,getArrayType:()=>t6,isCairo1Abi:()=>t4,isCairo1Type:()=>t5,isLen:()=>tM,isTypeArray:()=>tH,isTypeBool:()=>tJ,isTypeByteArray:()=>t0,isTypeBytes31:()=>tQ,isTypeContractAddress:()=>tZ,isTypeEnum:()=>tK,isTypeEthAddress:()=>tz,isTypeFelt:()=>tF,isTypeLiteral:()=>tX,isTypeNamedTuple:()=>tU,isTypeNonZero:()=>t3,isTypeOption:()=>tq,isTypeResult:()=>tY,isTypeSecp256k1Point:()=>t2,isTypeStruct:()=>tj,isTypeTuple:()=>t$,isTypeU96:()=>t1,isTypeUint:()=>tW,isTypeUint256:()=>tG,tuple:()=>ne,uint256:()=>t9,uint512:()=>t7});var tB=(1n<<128n)-1n,tR=(1n<<256n)-1n,tV=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){let n=e.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(1===t.length){let n=e.validate(t[0]);this.low=n&tB,this.high=n>>128n}else if(2===t.length){let n=e.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}else throw Error("Incorrect constructor parameters")}static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>tR)throw Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){let n=BigInt(e),r=BigInt(t);if(n<0n||n>0xffffffffffffffffffffffffffffffffn)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(r<0n||r>0xffffffffffffffffffffffffffffffffn)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:n,high:r}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:G(this.low.toString(16)),high:G(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[tD(this.low),tD(this.high)]}},tP=(1n<<512n)-1n,tL=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){let n=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===t.length){let n=e.validate(t[0]);this.limb0=n&tB,this.limb1=(n&tB<<128n)>>128n,this.limb2=(n&tB<<256n)>>256n,this.limb3=n>>384n}else if(4===t.length){let n=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>tP)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,n,r){let a=BigInt(e),i=BigInt(t),s=BigInt(n),o=BigInt(r);return[a,i,s,o].forEach((e,t)=>{if(e<0n||e>tB)throw Error(`limb${t} is not in the range of a u128 number`)}),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:G(this.limb0.toString(16)),limb1:G(this.limb1.toString(16)),limb2:G(this.limb2.toString(16)),limb3:G(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[tD(this.limb0),tD(this.limb1),tD(this.limb2),tD(this.limb3)]}},tM=e=>/_len$/.test(e),tF=e=>"felt"===e||"core::felt252"===e,tH=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),t$=e=>/^\(.*\)$/i.test(e),tU=e=>/\(.*\)/i.test(e)&&e.includes(":"),tj=(e,t)=>e in t,tK=(e,t)=>e in t,tq=e=>e.startsWith("core::option::Option::"),tY=e=>e.startsWith("core::result::Result::"),tW=e=>Object.values(eK).includes(e),tG=e=>tV.isAbiType(e),tX=e=>Object.values(eq).includes(e),tJ=e=>"core::bool"===e,tZ=e=>e===eq.ContractAddress,tz=e=>e===eY,tQ=e=>"core::bytes_31::bytes31"===e,t0=e=>"core::byte_array::ByteArray"===e,t1=e=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===e,t2=e=>e===eq.Secp256k1Point,t5=e=>e.includes("::"),t6=e=>t5(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function t4(e){let{cairo:t}=t8(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function t3(e){return e.startsWith(eW)}function t8(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>("function"===e.type||"constructor"===e.type)&&(e.inputs.length||e.outputs.length));return t?t5((t.inputs.length?t.inputs:t.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var t9=e=>new tV(e).toUint256DecimalString(),t7=e=>new tL(e).toUint512DecimalString(),ne=(...e)=>({...e});function nt(e){return tD(e)}var nn=class{variant;constructor(e){let t=Object.values(e);if(0===t.length)throw Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>!eQ(e)).length)throw Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find(e=>!eQ(e))}activeVariant(){let e=Object.entries(this.variant).find(e=>!eQ(e[1]));return eQ(e)?"":e[0]}},nr={Some:0,None:1},na=class{Some;None;constructor(e,t){if(!(e in Object.values(nr)))throw Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===nr.Some){if(eQ(t))throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!eQ(this.Some)}isNone(){return!0===this.None}},ni={Ok:0,Err:1},ns=class{Ok;Err;constructor(e,t){if(!(e in Object.values(ni)))throw Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===ni.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!eQ(this.Ok))return this.Ok;if(!eQ(this.Err))return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!eQ(this.Ok)}isErr(){return!eQ(this.Err)}},no={isBN:(e,t,n)=>{if(!e2(e[n]))throw Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)},unknown:(e,t,n)=>{throw Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)}},nc=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce((e,t)=>tM(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},nl=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){let t=this.abi.find(e=>"interface"===e.type);return t?.items?.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}};function nu(e,t,n){return"constructor"===e&&!n&&!t.length}function nd(e,t,n){for(let r=0,a=0;r<e.length;r++)if(e[r]===t)a++;else if(e[r]===n&&0==--a)return r;return 1/0}function nh(e){return t5(e)?function(e){let t,n=e.slice(1,-1),r=[],a=0;for(;a<n.length;){switch(!0){case"("===n[a]:t=a+nd(n.slice(a),"(",")")+1;break;case n.startsWith("core::result::Result::<",a)||n.startsWith("core::array::Array::<",a)||n.startsWith("core::option::Option::<",a):t=a+nd(n.slice(a),"<",">")+1;break;default:{let e=n.indexOf(",",a);t=-1!==e?e:1/0}}r.push(n.slice(a,t)),a=t+2}return r}(e):function(e){let{subTuple:t,result:n}=function(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],n="",r=0;for(;r<e.length;){if("("===e[r]){let a=1,i=r;for(r++;a;)")"===e[r]&&a--,"("===e[r]&&a++,r++;t.push(e.substring(i,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}(e.replace(/\s/g,"").slice(1,-1)),r=n.split(",").map(e=>t.length?e.replace(" ",t.shift()):e);return tU(e)&&(r=r.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),n=e.substring(t.length+1);return{name:t,type:n}}(t)),[])),r}(e)}function np(e,t){switch(!0){case tV.isAbiType(e):return new tV(t).toApiRequest();case tL.isAbiType(e):return new tL(t).toApiRequest();case tQ(e):return tC(t.toString());case t2(e):{let e=W(e8(t)).padStart(128,"0"),n=t9(G(e.slice(-64))),r=t9(G(e.slice(0,-64)));return[tD(r.low),tD(r.high),tD(n.low),tD(n.high)]}default:return tD(t)}}function nf(e,t,n,r){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(Array.isArray(e)){let a=[];a.push(tD(e.length));let i=t6(t);return e.reduce((e,t)=>e.concat(nf(t,i,n,r)),a)}if(n[t]&&n[t].members.length){if(tV.isAbiType(t))return new tV(e).toApiRequest();if(tL.isAbiType(t))return new tL(e).toApiRequest();if(tz(t))return np(t,e);if(t0(t)){let t=tx(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}let{members:a}=n[t];return a.reduce((t,a)=>t.concat(nf(e[a.name],a.type,n,r)),[])}if(t$(t))return(function(e,t){let n=nh(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${r}
      expected: ${n}`);return n.map((e,t)=>({element:r[t],type:e.type??e}))})(e,t).reduce((e,t)=>{let a=nf(t.element,t.type,n,r);return e.concat(a)},[]);if(tV.isAbiType(t))return new tV(e).toApiRequest();if(tL.isAbiType(t))return new tL(e).toApiRequest();if(tK(t,r)){let{variants:a}=r[t];if(tq(t)){if(e.isSome()){let t=a.find(e=>"Some"===e.name);if(eQ(t))throw Error("Error in abi : Option has no 'Some' variant.");let i=t.type;if("()"===i)return nr.Some.toString();let s=nf(e.unwrap(),i,n,r);return Array.isArray(s)?[nr.Some.toString(),...s]:[nr.Some.toString(),s]}return nr.None.toString()}if(tY(t)){if(e.isOk()){let t=a.find(e=>"Ok"===e.name);if(eQ(t))throw Error("Error in abi : Result has no 'Ok' variant.");let i=t.type;if("()"===i)return ni.Ok.toString();let s=nf(e.unwrap(),i,n,r);return Array.isArray(s)?[ni.Ok.toString(),...s]:[ni.Ok.toString(),s]}let t=a.find(e=>"Err"===e.name);if(eQ(t))throw Error("Error in abi : Result has no 'Err' variant.");let i=t.type;if("()"===i)return ni.Err.toString();let s=nf(e.unwrap(),i,n,r);return Array.isArray(s)?[ni.Err.toString(),...s]:[ni.Err.toString(),s]}let i=e.activeVariant(),s=a.find(e=>e.name===i);if(eQ(s))throw Error(`Not find in abi : Enum has no '${i}' variant.`);let o=s.type,c=a.findIndex(e=>e.name===i);if("()"===o)return c.toString();let l=nf(e.unwrap(),o,n,r);return Array.isArray(l)?[c.toString(),...l]:[c.toString(),l]}if(t3(t))return np(t6(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return np(t,e)}function ng(e,t){switch(!0){case tJ(e):return!!BigInt(t.next().value);case tV.isAbiType(e):return new tV(t.next().value,t.next().value).toBigInt();case tL.isAbiType(e):let n=t.next().value,r=t.next().value;return new tL(n,r,t.next().value,t.next().value).toBigInt();case tz(e):return BigInt(t.next().value);case tQ(e):return tN(t.next().value);case t2(e):let a=W(t.next().value).padStart(32,"0"),i=W(t.next().value).padStart(32,"0"),s=W(t.next().value).padStart(32,"0");return BigInt(G(i+a+W(t.next().value).padStart(32,"0")+s));default:return BigInt(t.next().value)}}function nm(e,t,n,r){if("()"===t.type)return{};if(tV.isAbiType(t.type))return new tV(e.next().value,e.next().value).toBigInt();if(tL.isAbiType(t.type)){let t=e.next().value,n=e.next().value;return new tL(t,n,e.next().value,e.next().value).toBigInt()}if(t0(t.type)){let t=[],n=BigInt(e.next().value);for(;t.length<n;)t.push(e8(e.next().value));let r=e8(e.next().value);return tO({data:t,pending_word:r,pending_word_len:BigInt(e.next().value)})}if(tH(t.type)){let a=[],i={name:"",type:t6(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(nm(e,i,n,r));return a}if(t3(t.type))return nm(e,{name:"",type:t6(t.type)},n,r);if(n&&t.type in n&&n[t.type])return tz(t.type)?ng(t.type,e):n[t.type].members.reduce((t,a)=>(t[a.name]=nm(e,a,n,r),t),{});if(r&&t.type in r&&r[t.type]){let a=Number(e.next().value),i=r[t.type].variants.reduce((t,i,s)=>(s===a?t[i.name]=nm(e,{name:"",type:i.type},n,r):t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=a===nr.Some?i.Some:void 0;return new na(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=a===ni.Ok?i.Ok:i.Err,new ns(a,e)}return new nn(i)}if(t$(t.type))return nh(t.type).reduce((t,a,i)=>{let s=a?.name?a.name:i,o=a?.type?a.type:a;return t[s]=nm(e,{name:s,type:o},n,r),t},{});if(tH(t.type)){let a=[],i={name:"",type:t6(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(nm(e,i,n,r));return a}return ng(t.type,e)}function ny(e,t,n,r,a){let{name:i,type:s}=t;switch(!0){case tM(i):return BigInt(e.next().value);case n&&s in n||t$(s):case r&&tK(s,r):return nm(e,t,n,r);case tH(s):if(t5(s))return nm(e,t,n,r);let o=[];if(a&&a[`${i}_len`]){let s=a[`${i}_len`];for(;o.length<s;)o.push(nm(e,{name:i,type:t.type.replace("*","")},n,r))}return o;case t3(s):return nm(e,t,n,r);default:return ng(s,e)}}var n_=(e,t)=>{if(ez(e5(e)||e0(e)||e2(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),e5(e)&&!e4(e))return;let n=BigInt(e.toString(10));ez(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},nE=(e,t)=>{let n;switch(e0(e)&&ez(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),ez(e5(e)||e0(e)||e2(e)||e6(e)&&"low"in e&&"high"in e||e6(e)&&["limb0","limb1","limb2","limb3"].every(t=>t in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case eK.u256:n=new tV(e).toBigInt();break;case eK.u512:n=new tL(e).toBigInt();break;default:n=e3(e)}switch(t.type){case eK.u8:ez(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case eK.u16:ez(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case eK.u32:ez(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case eK.u64:ez(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case eK.u128:ez(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case eK.u256:ez(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case eK.u512:ez(tL.is(n),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case eq.ClassHash:case eq.ContractAddress:ez(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case eq.Secp256k1Point:ez(n>=0n&&n<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break;case eq.U96:ez(n>=0n&&n<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`)}},nb=(e,t)=>{ez(e1(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},nT=(e,t,n)=>{if(t.type===eK.u256||t.type===eK.u512)return void nE(e,t);if(tz(t.type)){ez(!e6(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);let n=BigInt(e.toString(10));ez(n>=0n&&n<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}ez(e6(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),n[t.type].members.forEach(({name:n})=>{ez(Object.keys(e).includes(n),`Validate: arg ${t.name} should have a property ${n}`)})},nA=(e,t)=>{ez(e6(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);let n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(tq(t.type)&&r.includes("isSome")&&r.includes("isNone")||tY(t.type)&&r.includes("isOk")&&r.includes("isErr"))&&!(r.includes("variant")&&r.includes("activeVariant")))throw Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},nI=(e,t)=>{ez(e6(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},nv=(e,t,n,r)=>{let a=t6(t.type);if(!(tF(a)&&tS(e)))switch(ez(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),!0){case tF(a):e.forEach(e=>n_(e,t));break;case t$(a):e.forEach(e=>nI(e,{name:t.name,type:a}));break;case tH(a):e.forEach(e=>nv(e,{name:"",type:a},n,r));break;case tj(a,n):e.forEach(e=>nT(e,{name:t.name,type:a},n));break;case tK(a,r):e.forEach(e=>nA(e,{name:t.name,type:a}));break;case tW(a)||tX(a):e.forEach(e=>nE(e,{name:"",type:a}));break;case tJ(a):e.forEach(e=>nb(e,t));break;default:throw Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}};function nk(e,t,n,r){e.inputs.reduce((e,a)=>{let i=t[e];switch(!0){case tM(a.name):return e;case tF(a.type):n_(i,a);break;case tQ(a.type):ez(e5(i),`Validate: arg ${a.name} should be a string.`),ez(i.length<32,`Validate: arg ${a.name} cairo typed ${a.type} should be a string of less than 32 characters.`);break;case tW(a.type)||tX(a.type):nE(i,a);break;case tJ(a.type):nb(i,a);break;case t0(a.type):ez(e5(i),`Validate: arg ${a.name} should be a string.`);break;case tH(a.type):nv(i,a,n,r);break;case tj(a.type,n):nT(i,a,n);break;case tK(a.type,r):nA(i,a);break;case t$(a.type):nI(i,a);break;case t3(a.type):let s=t6(a.type);switch(ez(tW(s)&&s!==tL.abiSelector||tF(s),`Validate: ${a.name} type is not authorized for NonZero type.`),!0){case tF(s):n_(i,a),ez(BigInt(i.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case tW(s):nE(i,{name:"",type:s}),s===eK.u256?ez(new tV(i).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):ez(e3(i)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value "${i}"`)}break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${i}`)}return e+1},0)}var nS=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=function(e){var t;let n=(t=e).find(e=>"interface"===e.type)?2:+!!t4(t);if(0===n||1===n)return new nc(e);if(2===n)return new nl(e);throw Error(`Unsupported ABI version ${n}`)}(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,n=[]){e!==ej.DEPLOY&&ez(this.abi.filter(t=>{if("function"!==t.type)return!1;let n="view"===t.stateMutability||"view"===t.state_mutability;return e===ej.INVOKE?!n:n}).map(e=>e.name).includes(t),`${e===ej.INVOKE?"invocable":"viewable"} method not found in abi`);let r=this.abi.find(n=>e===ej.DEPLOY?n.name===t&&"constructor"===n.type:n.name===t&&"function"===n.type);if(nu(t,n,r))return;let a=this.parser.methodInputsLength(r);if(n.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${n.length}`);nk(r,n,this.structs,this.enums)}compile(e,t){let n,r=this.abi.find(t=>t.name===e);if(nu(e,t,r))return[];Array.isArray(t)?n=t:(n=Object.values(function(e,t,n,r){let a=(e,t)=>{if(tH(t)){var o,c=e,l=t;let n=t6(l);return e5(c)?c:c.map(e=>a(e,n))}if(tK(t,r))return s(e,r[t]);if(t$(t)){return o=e,nh(t).reduce((e,t,n)=>{let r,i=Object.keys(o),s=t?.type?t.type:t;return r=a(o[i[n]],s),Object.defineProperty(e,n.toString(),{enumerable:!0,value:r??o[i[n]]}),e},{})}if(tz(t)||t3(t)||t0(t)||t1(t)||t2(t))return e;if(tV.isAbiType(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:e.low,high:e.high}}if(tL.isAbiType(t)){if("object"!=typeof e)return e;if(!["limb0","limb1","limb2","limb3"].every(t=>t in e))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:e.limb0,limb1:e.limb1,limb2:e.limb2,limb3:e.limb3}}return tj(t,n)?i(e,n[t].members):e},i=(e,t)=>t.reduce((t,n)=>{let r;if("undefined"===e[n.name]&&(t5(n.type)||!tM(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);return r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r??e[n.name]}),t},{}),s=(e,t)=>{if(tY(t.name)){let n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),r=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new ns(ni.Ok,a(e.unwrap(),n)):new ns(ni.Err,a(e.unwrap(),r))}if(tq(t.name)){let n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new na(nr.Some,a(e.unwrap(),n)):new na(nr.None,{})}return new nn(Object.fromEntries(Object.entries(e.variant).map(n=>{if(eQ(n[1]))return n;let r=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===r?n:[n[0],a(e.unwrap(),r)]})))};return t.reduce((t,n)=>{let r;return tM(n.name)&&!t5(n.type)?t:(r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r}),t)},{})}(t,r.inputs,this.structs,this.enums)),nk(r,n,this.structs,this.enums));let a=n[Symbol.iterator](),i=r.inputs.reduce((e,t)=>tM(t.name)&&!t5(t.type)?e:e.concat(function(e,t,n,r){let{name:a,type:i}=t,{value:s}=e.next();switch(!0){case tH(i):if(!Array.isArray(s)&&!tv(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return e5(s)&&(s=tw(s)),nf(s,t.type,n,r);case t3(i):return np(t6(i),s);case tz(i):return np(i,s);case tj(i,n)||t$(i)||tV.isAbiType(i):case tK(i,r):return nf(s,i,n,r);default:return np(i,s)}}(a,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){let t,n=e=>{let t=(e,n=".")=>{let r=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(r).flatMap(([e,a])=>{let i=a;"entrypoint"===e?i=ty(i):tS(i)&&(i=tx(i));let s=Array.isArray(r)&&"0"===e?"$$len":e;if(e2(i))return[[`${n}${s}`,tD(i)]];if(Object(i)===i){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),r=[...Object.getOwnPropertyNames(i),...e];if(r.includes("isSome")&&r.includes("isNone")){let e=i,r=e.isSome()?nr.Some:nr.None;return e.isSome()?t({0:r,1:e.unwrap()},`${n}${s}.`):[[`${n}${s}`,tD(r)]]}if(r.includes("isOk")&&r.includes("isErr")){let e=i;return t({0:e.isOk()?ni.Ok:ni.Err,1:e.unwrap()},`${n}${s}.`)}if(r.includes("variant")&&r.includes("activeVariant")){let e=i,r=e.activeVariant(),a=Object.keys(e.variant).findIndex(e=>e===r);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${n}${s}`,tD(a)]]:t({0:a,1:e.unwrap()},`${n}${s}.`)}return t(i,`${n}${s}.`)}return[[`${n}${s}`,tD(i)]]})};return Object.fromEntries(t(e))};return Object.defineProperty(t=Array.isArray(e)?Object.values(n({...e})):Object.values(n(e)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:n}=this.abi.find(t=>t.name===e),r=t.flat()[Symbol.iterator](),a=n.flat().reduce((e,t,n)=>{let a=t.name??n;return e[a]=ny(r,t,this.structs,this.enums,e),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e},{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,n){return function e(t,n,r){return Object.entries(t).reduce((a,[i,s])=>{let o=r??n[i];if(!(i in n)&&!r)return a[i]=s,a;if("string"===o){if(Array.isArray(t[i])){let n=e(t[i],t[i].map(e=>o));return a[i]=Object.values(n).join(""),a}return no.isBN(t,n,i),a[i]=tN(s),a}if("number"===o)return no.isBN(t,n,i),a[i]=Number(s),a;if("function"==typeof o)return a[i]=o(s),a;if(Array.isArray(o)){let n=e(t[i],o,o[0]);return a[i]=Object.values(n),a}return e6(o)?a[i]=e(t[i],o):no.unknown(t,n,i),a},{})}(this.parse(e,t),n)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map(e=>e8(e))}decodeParameters(e,t){let n=Array.isArray(e)?e:[e],r=t.flat()[Symbol.iterator](),a=n.map(e=>ny(r,{name:"",type:e},this.structs,this.enums));return 1===a.length?a[0]:a}};function nw(e){return[...e,e.length].reduce((e,t)=>u.pedersen(e3(e),e3(t)),0).toString()}function nC(e,t,n,r,a,i,s,o=[]){let c=[e,t,n,r,nw(a),i,s,...o];return nw(c)}function nN(e,t,n,r,a,i,s){return nC("0x6465636c617265",n,t,0,[e],r,a,[i,...s?[s]:[]])}function nO(e,t,n,r,a,i,s,o){return nC("0x6465706c6f795f6163636f756e74",a,e,0,[t,r,...n],i,s,[o])}function nx(e,t,n,r,a,i){return nC("0x696e766f6b65",t,e,0,n,r,a,[i])}function nD(e,t,n,r,a,i){let s=[e,...r];return nC("0x6c315f68616e646c6572",0,t,t_(n),s,0,a,[i])}I({},{calculateContractAddressFromHash:()=>nQ,calculateDeclareTransactionHash:()=>nY,calculateDeployAccountTransactionHash:()=>nW,calculateInvokeTransactionHash:()=>nq,calculateL2MessageTxHash:()=>nD,computeCompiledClassHash:()=>n3,computeContractClassHash:()=>n7,computeHashOnElements:()=>nJ,computeHintedClassHash:()=>n2,computeLegacyContractClassHash:()=>n5,computePedersenHash:()=>nG,computePedersenHashOnElements:()=>nZ,computePoseidonHash:()=>nX,computePoseidonHashOnElements:()=>nz,computeSierraContractClassHash:()=>n9,formatSpaces:()=>n1,getL2MessageHash:()=>tb,getSelector:()=>t_,getSelectorFromName:()=>ty,hashByteCodeSegments:()=>n4,keccakBn:()=>tg,poseidon:()=>h,solidityUint256PackedKeccak256:()=>tE,starknetKeccak:()=>tm}),I({},{calculateDeclareTransactionHash:()=>nN,calculateDeployAccountTransactionHash:()=>nO,calculateL2MessageTxHash:()=>nD,calculateTransactionHash:()=>nx,calculateTransactionHashCommon:()=>nC,computeHashOnElements:()=>nw}),I({},{starkCurve:()=>u,weierstrass:()=>p}),I({},{calculateDeclareTransactionHash:()=>nj,calculateDeployAccountTransactionHash:()=>nU,calculateInvokeTransactionHash:()=>nK,calculateTransactionHashCommon:()=>n$,encodeResourceBoundsL1:()=>nM,encodeResourceBoundsL2:()=>nF,hashDAMode:()=>nL,hashFeeField:()=>nH});var nB=e=>e.map(e=>BigInt(e)),nR=64n+128n,nV=BigInt(tC("L1_GAS")),nP=BigInt(tC("L2_GAS"));function nL(e,t){return(BigInt(e)<<32n)+BigInt(t)}function nM(e){return(nV<<nR)+(BigInt(e.l1_gas.max_amount)<<128n)+BigInt(e.l1_gas.max_price_per_unit)}function nF(e){return(nP<<nR)+(BigInt(e.l2_gas.max_amount)<<128n)+BigInt(e.l2_gas.max_price_per_unit)}function nH(e,t){let n=nM(t),r=nF(t);return(0,u.poseidonHashMany)([BigInt(e),n,r])}function n$(e,t,n,r,a,i,s,o,c,l,d=[]){let h=nH(i,l),p=nL(o,c),f=nB([e,t,n,h,(0,u.poseidonHashMany)(nB(s)),r,a,p,...nB(d)]);return e8((0,u.poseidonHashMany)(f))}function nU(e,t,n,r,a,i,s,o,c,l,d,h){return n$("0x6465706c6f795f6163636f756e74",a,e,i,s,d,h,o,c,l,[(0,u.poseidonHashMany)(nB(n)),t,r])}function nj(e,t,n,r,a,i,s,o,c,l,d,h){return n$("0x6465636c617265",r,n,a,i,d,nB(h),o,c,l,[(0,u.poseidonHashMany)(nB(s)),e,t])}function nK(e,t,n,r,a,i,s,o,c,l,d){return n$("0x696e766f6b65",t,e,r,a,l,d,s,o,c,[(0,u.poseidonHashMany)(nB(i)),(0,u.poseidonHashMany)(nB(n))])}function nq(e){return[v.ETransactionVersion.V3,v.ETransactionVersion.F3].includes(e.version)?nK(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):nx(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function nY(e){return[v.ETransactionVersion.V3,v.ETransactionVersion.F3].includes(e.version)?nj(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):nN(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function nW(e){return[v.ETransactionVersion.V3,v.ETransactionVersion.F3].includes(e.version)?nU(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):nO(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}function nG(e,t){return u.pedersen(BigInt(e),BigInt(t))}function nX(e,t){return e8(u.poseidonHash(BigInt(e),BigInt(t)))}function nJ(e){return[...e,e.length].reduce((e,t)=>u.pedersen(BigInt(e),BigInt(t)),0).toString()}var nZ=nJ;function nz(e){return e8((0,u.poseidonHashMany)(e.map(e=>BigInt(e))))}function nQ(e,t,n,r){let a=nJ(nS.compile(n));return e8(BigInt(nJ([tD("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,e,t,a]))%ec)}function n0(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function n1(e){let t=!1,n=[];for(let r of e)'"'===r&&!1==(n.length>0&&"\\"===n.slice(-1)[0])&&(t=!t),t?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function n2(e){let{abi:t,program:n}=e,r=n1(eO({abi:t,program:n},n0));return G(u.keccak(U(r)).toString(16))}function n5(e){let t=e5(e)?eC(e):e,n=e8(ei),r=nJ(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),a=nJ(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=nJ(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),s=nJ(t.program.builtins.map(e=>tC(e))),o=n2(t),c=nJ(t.program.data);return nJ([n,r,a,i,s,o,c])}function n6(e){let t=e.flatMap(e=>{var t;return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,u.poseidonHashMany)(t.flatMap(e=>BigInt(tC(e)))))]});return(0,u.poseidonHashMany)(t)}function n4(e){let t=e.bytecode.map(e=>BigInt(e)),n=e.bytecode_segment_lengths??[],r=0,a=n.flatMap(e=>{let n=t.slice(r,r+=e);return[BigInt(e),(0,u.poseidonHashMany)(n)]});return 1n+(0,u.poseidonHashMany)(a)}function n3(e){let t=BigInt(tC("COMPILED_CLASS_V1")),n=n6(e.entry_points_by_type.EXTERNAL),r=n6(e.entry_points_by_type.L1_HANDLER),a=n6(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?n4(e):(0,u.poseidonHashMany)(e.bytecode.map(e=>BigInt(e)));return e8((0,u.poseidonHashMany)([t,n,r,a,i]))}function n8(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]);return(0,u.poseidonHashMany)(t)}function n9(e){let t=BigInt(tC("CONTRACT_CLASS_V0.1.0")),n=n8(e.entry_points_by_type.EXTERNAL),r=n8(e.entry_points_by_type.L1_HANDLER),a=n8(e.entry_points_by_type.CONSTRUCTOR),i=function(e){let t=n1(eO(e.abi,null));return BigInt(G(u.keccak(U(t)).toString(16)))}(e),s=(0,u.poseidonHashMany)(e.sierra_program.map(e=>BigInt(e)));return e8((0,u.poseidonHashMany)([t,n,r,a,i,s]))}function n7(e){let t=e5(e)?eC(e):e;return"sierra_program"in t?n9(t):n5(t)}function re(e){let t=e5(e)?e:eO(e);return q((0,f.ZI)(t))}function rt(e){return Array.isArray(e)?e:eC($((0,f.Aq)(K(e))))}function rn(){let e=u.utils.randomPrivateKey();return(0,u.getStarkKey)(e)}function rr(e){return G(e).toLowerCase()}function ra(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>e8(e));try{let{r:t,s:n}=e;return[e8(t),e8(n)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function ri(e){return ta(ra(e))}function rs(e){return ti(ra(e))}function ro(e,t=50){return th(e,t)}function rc(e,t=50,n=50){if(e2(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}};if(eQ(e.gas_consumed)||eQ(e.gas_price))throw Error("estimateFeeToBounds: estimate is undefined");return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?e8(th(BigInt(e.overall_fee)/BigInt(e.gas_price),t)):e8(th(e.gas_consumed,t)),max_price_per_unit:e8(th(e.gas_price,n))}}}function rl(e){if(e===v.EDataAvailabilityMode.L1)return v.EDAMode.L1;if(e===v.EDataAvailabilityMode.L2)return v.EDAMode.L2;throw Error("EDAM conversion")}function ru(e,t){let n=t?e8(t):void 0,r=e8(e);if(t&&!Object.values(v.ETransactionVersion).includes(n))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(v.ETransactionVersion).includes(r))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?n:r}function rd(e){if(!e)return;let t=e8(e);if(t===v.ETransactionVersion.V0)return v.ETransactionVersion.F0;if(t===v.ETransactionVersion.V1)return v.ETransactionVersion.F1;if(t===v.ETransactionVersion.V2)return v.ETransactionVersion.F2;if(t===v.ETransactionVersion.V3)return v.ETransactionVersion.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function rh(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||v.EDataAvailabilityMode.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||v.EDataAvailabilityMode.L1,resourceBounds:e.resourceBounds??rc(en)}}function rp(e){return e===v.ETransactionVersion.F2?v.ETransactionVersion.F1:e===v.ETransactionVersion.V2?v.ETransactionVersion.V1:e}function rf(e){let t=e8(e);return G(Y((0,u.getPublicKey)(t,!1)))}function rg(e){return"sierra_program"in(e5(e)?eC(e):e)}function rm(){return z(Y(g.bI.utils.randomPrivateKey()))}function ry(e){tr(e,en,2n**160n-1n,"Ethereum Address ");let t=G(W(e8(e)).padStart(40,"0"));return ez(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}I({},{compressProgram:()=>re,decompressProgram:()=>rt,estimateFeeToBounds:()=>rc,estimatedFeeToMaxFee:()=>ro,formatSignature:()=>ra,getFullPublicKey:()=>rf,intDAM:()=>rl,makeAddress:()=>rr,randomAddress:()=>rn,reduceV2:()=>rp,signatureToDecimalArray:()=>ri,signatureToHexArray:()=>rs,toFeeVersion:()=>rd,toTransactionVersion:()=>ru,v3Details:()=>rh}),I({},{ethRandomPrivateKey:()=>rm,validateAndParseEthAddress:()=>ry});var r_=H&&window.fetch.bind(window)||!eQ(global)&&(0,m.A)(global.fetch)||y;function rE(e){return new Promise(t=>{setTimeout(t,e)})}function rb(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=n1(eO(e.abi)),t.sierra_program=n1(eO(e.sierra_program)),t.sierra_program=re(t.sierra_program),t}function rT(e){let t=e5(e)?eC(e):e;return rg(e)?rb(t):{...t,..."program"in t&&{program:re(t.program)}}}I({},{Block:()=>rv,createSierraContractClass:()=>rb,getDefaultNodeUrl:()=>rA,isPendingBlock:()=>rw,isPendingStateUpdate:()=>rN,isPendingTransaction:()=>rC,isV3Tx:()=>rk,isVersion:()=>rS,parseContract:()=>rT,validBlockTags:()=>rI,wait:()=>rE});var rA=(e,t=!1)=>{t||console.warn("Using default public node url, please provide nodeUrl in provider options!");let n=eb[e??"SN_SEPOLIA"],r=Math.floor(Math.random()*n.length);return n[r]},rI=Object.values(eU),rv=class{hash=null;number=null;tag=null;setIdentifier(e){if(e5(e))if(tI(e))this.number=parseInt(e,10);else if(e4(e))this.hash=e;else if(rI.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`);else e2(e)?this.hash=e8(e):e0(e)?this.number=e:this.tag=eU.PENDING;if(e0(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash};function rk(e){let t=e.version?e8(e.version):v.ETransactionVersion.V3;return t===v.ETransactionVersion.V3||t===v.ETransactionVersion.F3}function rS(e,t){let[n,r]=e.split("."),[a,i]=t.split(".");return n===a&&r===i}function rw(e){return"PENDING"===e.status}function rC(e){return!("block_hash"in e)}function rN(e){return!("block_hash"in e)}I({},{buildUDCCall:()=>rP,fromCallsToExecuteCalldata:()=>rx,fromCallsToExecuteCalldataWithNonce:()=>rD,fromCallsToExecuteCalldata_cairo1:()=>rR,getExecuteCalldata:()=>rV,getVersionsByType:()=>rL,transformCallsToMulticallArrays:()=>rO,transformCallsToMulticallArrays_cairo1:()=>rB});var rO=e=>{let t=[],n=[];return e.forEach(e=>{let r=nS.compile(e.calldata||[]);t.push({to:e3(e.contractAddress).toString(10),selector:e3(ty(e.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)}),{callArray:t,calldata:nS.compile({calldata:n})}},rx=e=>{let{callArray:t,calldata:n}=rO(e);return[...nS.compile({callArray:t}),...n]},rD=(e,t)=>[...rx(e),e3(t).toString()],rB=e=>e.map(e=>({to:e3(e.contractAddress).toString(10),selector:e3(ty(e.entrypoint)).toString(10),calldata:nS.compile(e.calldata||[])})),rR=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:nS.compile(e.calldata)}));return nS.compile({orderCalls:t})},rV=(e,t="0")=>"1"===t?rR(e):rx(e);function rP(e,t){let n=[].concat(e).map(e=>{let{classHash:n,salt:r,unique:a=!0,constructorCalldata:i=[]}=e,s=nS.compile(i),o=r??rn();return{call:{contractAddress:e_.ADDRESS,entrypoint:e_.ENTRYPOINT,calldata:[n,o,tu(a),s.length,...s]},address:nQ(a?u.pedersen(t,o):o,n,s,a?e_.ADDRESS:0)}});return{calls:n.map(e=>e.call),addresses:n.map(e=>e.address)}}function rL(e){return"fee"===e?{v1:v.ETransactionVersion.F1,v2:v.ETransactionVersion.F2,v3:v.ETransactionVersion.F3}:{v1:v.ETransactionVersion.V1,v2:v.ETransactionVersion.V2,v3:v.ETransactionVersion.V3}}var rM={headers:{"Content-Type":"application/json"},blockIdentifier:eU.PENDING,retries:200},rF=class{nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){let{baseFetch:t,batch:n,blockIdentifier:r,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=e||{};Object.values(ef).includes(s)?this.nodeUrl=rA(s,e?.default):s?this.nodeUrl=s:this.nodeUrl=rA(void 0,e?.default),this.baseFetch=t??r_,this.blockIdentifier=r??rM.blockIdentifier,this.chainId=a,this.headers={...rM.headers,...i},this.retries=o??rM.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,"number"==typeof n&&(this.batchClient=new eZ({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch}))}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){let r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:eO(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new eV(n,e,t);if(r instanceof eR)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:n,result:r}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,n),r}let n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){let n=e8(e),r=new rv(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let n=new rv(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=e8(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:a=!0}=t,i=new rv(n).identifier,s=[];return r&&s.push(S.ESimulationFlag.SKIP_VALIDATE),a&&s.push(S.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){let n,r=e8(e),{retries:a}=this,i=!1,s=!1,o=t?.retryInterval??this.transactionRetryIntervalDefault,c=t?.errorStates??[S.ETransactionStatus.REJECTED],l=t?.successStates??[S.ETransactionExecutionStatus.SUCCEEDED,S.ETransactionStatus.ACCEPTED_ON_L2,S.ETransactionStatus.ACCEPTED_ON_L1];for(;!i;){await rE(o);try{let e=(n=await this.getTransactionStatus(r)).execution_status,t=n.finality_status;if(!t)throw Error("waiting for transaction status");if(c.includes(e)||c.includes(t)){let r=`${e}: ${t}`,a=Error(r);throw a.response=n,s=!0,a}(l.includes(e)||l.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(r)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await rE(o)}return u}getStorageAt(e,t,n=this.blockIdentifier){let r=e8(e),a=e7(t),i=new rv(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let n=e8(e),r=new rv(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){let n=e8(e),r=new rv(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){let n=e8(e),r=new rv(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){let r=new rv(t).identifier,a={};return rS("0.5",await this.getSpecVersion())||(a={simulation_flags:n?[S.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:r,...a})}async invoke(e,t){let n;return n=rk(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:S.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:nS.toHex(e.calldata),version:S.ETransactionVersion.V3,signature:rs(e.signature),nonce:e8(t.nonce),resource_bounds:t.resourceBounds,tip:e8(t.tip),paymaster_data:t.paymasterData.map(e=>e8(e)),account_deployment_data:t.accountDeploymentData.map(e=>e8(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:nS.toHex(e.calldata),type:S.ETransactionType.INVOKE,max_fee:e8(t.maxFee||0),version:S.ETransactionVersion.V1,signature:rs(e.signature),nonce:e8(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},a){let i;if(rg(e)||rk(a))if(rg(e)&&!rk(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:S.ETransactionType.DECLARE,contract_class:{sierra_program:rt(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:S.ETransactionVersion.V2,max_fee:e8(a.maxFee||0),signature:rs(t),sender_address:n,nonce:e8(a.nonce)}});else if(rg(e)&&rk(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:S.ETransactionType.DECLARE,sender_address:n,compiled_class_hash:r||"",version:S.ETransactionVersion.V3,signature:rs(t),nonce:e8(a.nonce),contract_class:{sierra_program:rt(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:e8(a.tip),paymaster_data:a.paymasterData.map(e=>e8(e)),account_deployment_data:a.accountDeploymentData.map(e=>e8(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters");else i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:S.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:S.ETransactionVersion.V1,max_fee:e8(a.maxFee||0),signature:rs(t),sender_address:n,nonce:e8(a.nonce)}});return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},a){let i;return i=rk(a)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:S.ETransactionType.DEPLOY_ACCOUNT,version:S.ETransactionVersion.V3,signature:rs(r),nonce:e8(a.nonce),contract_address_salt:e8(n||0),constructor_calldata:nS.toHex(t||[]),class_hash:e8(e),resource_bounds:a.resourceBounds,tip:e8(a.tip),paymaster_data:a.paymasterData.map(e=>e8(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:nS.toHex(t||[]),class_hash:e8(e),contract_address_salt:e8(n||0),type:S.ETransactionType.DEPLOY_ACCOUNT,max_fee:e8(a.maxFee||0),version:S.ETransactionVersion.V1,signature:rs(r),nonce:e8(a.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let n=new rv(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:ty(e.entrypoint),calldata:nS.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:ry(n),to_address:e8(r),entry_point_selector:t_(a),payload:tl(i)},o=new rv(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let n,r=rL(t);if(n=rk(e)?{signature:rs(e.signature),nonce:e8(e.nonce),resource_bounds:e.resourceBounds,tip:e8(e.tip),paymaster_data:e.paymasterData.map(e=>e8(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>e8(e))}:{signature:rs(e.signature),nonce:e8(e.nonce),max_fee:e8(e.maxFee||0)},e.type===eL.INVOKE)return{type:S.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:nS.toHex(e.calldata),version:e8(e.version||r.v3),...n};if(e.type===eL.DECLARE)return rg(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:rt(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:e8(e.version||r.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:e8(e.version||r.v1),...n};if(e.type===eL.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=n;return{type:e.type,constructor_calldata:nS.toHex(e.constructorCalldata||[]),class_hash:e8(e.classHash),contract_address_salt:e8(e.addressSalt||0),version:e8(e.version||r.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}};I({},{RpcChannel:()=>r$});var rH={headers:{"Content-Type":"application/json"},blockIdentifier:eU.PENDING,retries:200},r$=class{nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){let{baseFetch:t,batch:n,blockIdentifier:r,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=e||{};Object.values(ef).includes(s)?this.nodeUrl=rA(s,e?.default):s?this.nodeUrl=s:this.nodeUrl=rA(void 0,e?.default),this.baseFetch=t??r_,this.blockIdentifier=r??rH.blockIdentifier,this.chainId=a,this.headers={...rH.headers,...i},this.retries=o??rH.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,"number"==typeof n&&(this.batchClient=new eZ({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch}))}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){let r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:eO(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new eV(n,e,t);if(r instanceof eR)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:n,result:r}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,n),r}let n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){let n=e8(e),r=new rv(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new rv(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let n=new rv(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=e8(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=t,s=new rv(n).identifier,o=[];return r&&o.push(a.vn.SKIP_VALIDATE),i&&o.push(a.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:o})}async waitForTransaction(e,t){let n,r=e8(e),{retries:i}=this,s=!1,o=!1,c=t?.retryInterval??this.transactionRetryIntervalDefault,l=t?.errorStates??[a.sI.REJECTED],u=t?.successStates??[a.If.SUCCEEDED,a.sI.ACCEPTED_ON_L2,a.sI.ACCEPTED_ON_L1];for(;!s;){await rE(c);try{let e=(n=await this.getTransactionStatus(r)).execution_status,t=n.finality_status;if(!t)throw Error("waiting for transaction status");if(l.includes(e)||l.includes(t)){let r=`${e}: ${t}`,a=Error(r);throw a.response=n,o=!0,a}(u.includes(e)||u.includes(t))&&(s=!0)}catch(e){if(e instanceof Error&&o)throw e;if(i<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}i-=1}let d=null;for(;null===d;){try{d=await this.getTransactionReceipt(r)}catch(e){if(i<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}i-=1,await rE(c)}return d}getStorageAt(e,t,n=this.blockIdentifier){let r=e8(e),a=e7(t),i=new rv(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let n=e8(e),r=new rv(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){let n=e8(e),r=new rv(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){let n=e8(e),r=new rv(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){let r=new rv(t).identifier,i={};return rS("0.5",await this.getSpecVersion())||(i={simulation_flags:n?[a.vn.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:r,...i})}async invoke(e,t){let n;return n=rk(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:a.wV.INVOKE,sender_address:e.contractAddress,calldata:nS.toHex(e.calldata),version:a.WY.V3,signature:rs(e.signature),nonce:e8(t.nonce),resource_bounds:t.resourceBounds,tip:e8(t.tip),paymaster_data:t.paymasterData.map(e=>e8(e)),account_deployment_data:t.accountDeploymentData.map(e=>e8(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:nS.toHex(e.calldata),type:a.wV.INVOKE,max_fee:e8(t.maxFee||0),version:a.WY.V1,signature:rs(e.signature),nonce:e8(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},i){let s;if(rg(e)||rk(i))if(rg(e)&&!rk(i))s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.wV.DECLARE,contract_class:{sierra_program:rt(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:a.WY.V2,max_fee:e8(i.maxFee||0),signature:rs(t),sender_address:n,nonce:e8(i.nonce)}});else if(rg(e)&&rk(i))s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.wV.DECLARE,sender_address:n,compiled_class_hash:r||"",version:a.WY.V3,signature:rs(t),nonce:e8(i.nonce),contract_class:{sierra_program:rt(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:i.resourceBounds,tip:e8(i.tip),paymaster_data:i.paymasterData.map(e=>e8(e)),account_deployment_data:i.accountDeploymentData.map(e=>e8(e)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters");else s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.wV.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:a.WY.V1,max_fee:e8(i.maxFee||0),signature:rs(t),sender_address:n,nonce:e8(i.nonce)}});return this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},i){let s;return s=rk(i)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:a.wV.DEPLOY_ACCOUNT,version:a.WY.V3,signature:rs(r),nonce:e8(i.nonce),contract_address_salt:e8(n||0),constructor_calldata:nS.toHex(t||[]),class_hash:e8(e),resource_bounds:i.resourceBounds,tip:e8(i.tip),paymaster_data:i.paymasterData.map(e=>e8(e)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:nS.toHex(t||[]),class_hash:e8(e),contract_address_salt:e8(n||0),type:a.wV.DEPLOY_ACCOUNT,max_fee:e8(i.maxFee||0),version:a.WY.V1,signature:rs(r),nonce:e8(i.nonce)}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(e,t=this.blockIdentifier){let n=new rv(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:ty(e.entrypoint),calldata:nS.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:ry(n),to_address:e8(r),entry_point_selector:t_(a),payload:tl(i)},o=new rv(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let n,r=rL(t);if(n=rk(e)?{signature:rs(e.signature),nonce:e8(e.nonce),resource_bounds:e.resourceBounds,tip:e8(e.tip),paymaster_data:e.paymasterData.map(e=>e8(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>e8(e))}:{signature:rs(e.signature),nonce:e8(e.nonce),max_fee:e8(e.maxFee||0)},e.type===eL.INVOKE)return{type:a.wV.INVOKE,sender_address:e.contractAddress,calldata:nS.toHex(e.calldata),version:e8(e.version||r.v3),...n};if(e.type===eL.DECLARE)return rg(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:rt(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:e8(e.version||r.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:e8(e.version||r.v1),...n};if(e.type===eL.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=n;return{type:e.type,constructor_calldata:nS.toHex(e.constructorCalldata||[]),class_hash:e8(e.classHash),contract_address_salt:e8(e.addressSalt||0),version:e8(e.version||r.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},rU=class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return ro(e,this.margin?.maxFee)}estimateFeeToBounds(e){return rc(e,this.margin?.l1BoundMaxAmount,this.margin?.l1BoundMaxPricePerUnit)}parseGetBlockResponse(e){return{status:"PENDING",...e}}parseTransactionReceipt(e){return"actual_fee"in e&&e5(e.actual_fee)?{...e,actual_fee:{amount:e.actual_fee,unit:"FRI"}}:e}parseFeeEstimateResponse(e){let t=e[0];return{overall_fee:e3(t.overall_fee),gas_consumed:e3(t.gas_consumed),gas_price:e3(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?e3(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?e3(t.data_gas_price):0n}}parseFeeEstimateBulkResponse(e){return e.map(e=>({overall_fee:e3(e.overall_fee),gas_consumed:e3(e.gas_consumed),gas_price:e3(e.gas_price),unit:e.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e),data_gas_consumed:e.data_gas_consumed?e3(e.data_gas_consumed):0n,data_gas_price:e.data_gas_price?e3(e.data_gas_price):0n}))}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:e5(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}},rj=class e{statusReceipt;value;constructor(t){for(let[n]of([this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:e.isRejected(t)?["rejected",t]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,n,{enumerable:!1});for(let[e,n]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:n})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isRejected(){return"rejected"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return e.execution_status===eH.SUCCEEDED}static isReverted(e){return e.execution_status===eH.REVERTED}static isRejected(e){return e.status===eH.REJECTED}};I({},{TypedDataRevision:()=>o.K,encodeData:()=>r5,encodeType:()=>r0,encodeValue:()=>r2,getDependencies:()=>rQ,getMessageHash:()=>r4,getStructHash:()=>r6,getTypeHash:()=>r1,isMerkleTreeType:()=>rz,prepareSelector:()=>rZ,validateTypedData:()=>rJ,verifyMessage:()=>r3}),I({},{MerkleTree:()=>rK,proofMerklePath:()=>function e(t,n,r,a=nG){if(0===r.length)return t===n;let[i,...s]=r;return e(t,rK.hash(n,i,a),s,a)}});var rK=class e{leaves;branches=[];root;hashMethod;constructor(e,t=nG){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);let n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(e.hash(t[r],"0x0",this.hashMethod)):n.push(e.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(e,t,n=nG){let[r,a]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return n(r,a)}getProof(t,n=this.leaves,r=[]){let a=n.indexOf(t);if(-1===a)throw Error("leaf not found");if(1===n.length)return r;let i=a%2==0,s=(i?n[a+1]:n[a-1])??"0x0",o=[...r,s],c=this.leaves.length===n.length?-1:this.branches.findIndex(e=>e.length===n.length),l=this.branches[c+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),l,o)}},rq={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},rY={[o.K.ACTIVE]:{domain:"StarknetDomain",hashMethod:nz,hashMerkleMethod:nX,escapeTypeString:e=>`"${e}"`,presetTypes:rq},[o.K.LEGACY]:{domain:"StarkNetDomain",hashMethod:nZ,hashMerkleMethod:nG,escapeTypeString:e=>e,presetTypes:{}}};function rW(e,t,{min:n,max:r}){let a=BigInt(e);ez(a>=n&&a<=r,`${a} (${t}) is out of bounds [${n}, ${r}]`)}function rG({types:e,domain:t}){return rY[o.K.ACTIVE].domain in e&&t.revision===o.K.ACTIVE?o.K.ACTIVE:rY[o.K.LEGACY].domain in e&&(t.revision??o.K.LEGACY)===o.K.LEGACY?o.K.LEGACY:void 0}function rX(e){try{return e8(e)}catch(t){if(e5(e))return e8(tC(e));throw Error(`Invalid BigNumberish: ${e}`)}}function rJ(e){return!!(e.message&&e.primaryType&&e.types&&rG(e))}function rZ(e){return e4(e)?e:ty(e)}function rz(e){return"merkletree"===e.type}function rQ(e,t,n=[],r="",a=o.K.LEGACY){return("*"===t[t.length-1]?t=t.slice(0,-1):a===o.K.ACTIVE&&("enum"===t?t=r:t.match(/^\(.*\)$/)&&(t=t.slice(1,-1))),n.includes(t)||!e[t])?n:[t,...e[t].reduce((t,n)=>[...t,...rQ(e,n.type,t,n.contains,a).filter(e=>!t.includes(e))],[])]}function r0(e,t,n=o.K.LEGACY){let r=n===o.K.ACTIVE?{...e,...rY[n].presetTypes}:e,[a,...i]=rQ(r,t,void 0,void 0,n),s=a?[a,...i.sort()]:[],c=rY[n].escapeTypeString;return s.map(e=>{let t=r[e].map(e=>{let t="enum"===e.type&&n===o.K.ACTIVE?e.contains:e.type,r=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map(e=>e?c(e):e).join(",")})`:c(t);return`${c(e.name)}:${r}`});return`${c(e)}(${t})`}).join("")}function r1(e,t,n=o.K.LEGACY){return ty(r0(e,t,n))}function r2(e,t,n,r={},a=o.K.LEGACY){if(e[t])return[t,r6(e,t,n,a)];if(rY[a].presetTypes[t])return[t,r6(rY[a].presetTypes,t,n,a)];if(t.endsWith("*")){let r=n.map(n=>r2(e,t.slice(0,-1),n,void 0,a)[1]);return[t,rY[a].hashMethod(r)]}switch(t){case"enum":if(a===o.K.ACTIVE){let[i,s]=Object.entries(n)[0],o=e[r.parent].find(e=>e.name===r.key),c=e[o.contains],l=c.find(e=>e.name===i),u=c.indexOf(l),d=l.type.slice(1,-1).split(",").map((t,n)=>t?r2(e,t,s[n],void 0,a)[1]:t);return[t,rY[a].hashMethod([u,...d])]}return[t,rX(n)];case"merkletree":{let t=function(e,t){if(t.parent&&t.key){let n=e[t.parent].find(e=>e.name===t.key);if(!rz(n))throw Error(`${t.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return n.contains}return"raw"}(e,r),{root:i}=new rK(n.map(n=>r2(e,t,n,void 0,a)[1]),rY[a].hashMerkleMethod);return["felt",i]}case"selector":return["felt",rZ(n)];case"string":if(a===o.K.ACTIVE){let e=tx(n),r=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,rY[a].hashMethod(r)]}return[t,rX(n)];case"i128":if(a===o.K.ACTIVE){let e=BigInt(n);return rW(e,t,ed),[t,rX(e<0n?es+e:e)]}return[t,rX(n)];case"timestamp":case"u128":return a===o.K.ACTIVE&&rW(n,t,eh),[t,rX(n)];case"felt":case"shortstring":return a===o.K.ACTIVE&&rW(rX(n),t,eu),[t,rX(n)];case"ClassHash":case"ContractAddress":return a===o.K.ACTIVE&&rW(n,t,eu),[t,rX(n)];case"bool":return a===o.K.ACTIVE&&ez(e1(n),`Type mismatch for ${t} ${n}`),[t,rX(n)];default:if(a===o.K.ACTIVE)throw Error(`Unsupported type: ${t}`);return[t,rX(n)]}}function r5(e,t,n,r=o.K.LEGACY){let[a,i]=(e[t]??rY[r].presetTypes[t]).reduce(([a,i],s)=>{if(void 0===n[s.name]||null===n[s.name]&&"enum"!==s.type)throw Error(`Cannot encode data: missing data for '${s.name}'`);let o=n[s.name],c={parent:t,key:s.name},[l,u]=r2(e,s.type,o,c,r);return[[...a,l],[...i,u]]},[["felt"],[r1(e,t,r)]]);return[a,i]}function r6(e,t,n,r=o.K.LEGACY){return rY[r].hashMethod(r5(e,t,n,r)[1])}function r4(e,t){if(!rJ(e))throw Error("Typed data does not match JSON schema");let n=rG(e),{domain:r,hashMethod:a}=rY[n];return a([tC("StarkNet Message"),r6(e.types,r,e.domain,n),t,r6(e.types,e.primaryType,e.message,n)])}function r3(e,t,n,r){let a=rJ(e);if(!tf(e)&&!a)throw Error("message has a wrong format.");if(a&&void 0===r)throw Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(a&&!tf(r))throw Error("accountAddress shall be a BigNumberish");let i=a?r4(e,r):e8(e),s=Array.isArray(t)?new u.Signature(BigInt(t[0]),BigInt(t[1])):t,o=e8(n);return u.verify(s,i,o)}var r8=class{responseParser;channel;constructor(e){e&&"channel"in e?(this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new rU):(this.channel=new r$({...e,waitMode:!1}),this.responseParser=new rU(e?.feeMarginPercentage))}fetch(e,t,n=0){return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}async getSpecVersion(){return this.channel.getSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if(e===eU.LATEST)return;let n=await this.getBlockNumber(),r=e===eU.PENDING?n+1:Number(e8(e));if(r<=n)return;let{retries:a}=this.channel,i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===r?s=!0:await rE(t),(i-=1)<=0)throw Error(`waitForBlock() timed-out after ${a} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){let t=await this.channel.getTransactionByHash(e);ez("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");let{calldata:n,contract_address:r,entry_point_selector:a,nonce:i}=t;return tE([n[0],r,i,a,n.length-1,...n.slice(1)])}async getBlockWithReceipts(e){if(this.channel instanceof eS.RpcChannel)throw new eR("Unsupported method for RPC version");return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getPendingTransactions(){let{transactions:e}=await this.getBlockWithTxHashes(eU.PENDING).then(this.responseParser.parseGetBlockResponse);return Promise.all(e.map(e=>this.getTransactionByHash(e)))}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){let t=await this.channel.getTransactionReceipt(e);return new rj(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){return new rj(await this.channel.waitForTransaction(e,t))}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let a;if(e)a=await this.getClassAt(e,n);else if(t)a=await this.getClass(t,n);else throw Error("getContractVersion require contractAddress or classHash");return rg(a)?r?{cairo:"1",compiler:t8(a.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,n,r){return this.getInvokeEstimateFee(e,t,n,r)}async getInvokeEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:eL.INVOKE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:eL.DECLARE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:eL.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,n,r,a){let i,s=rJ(e);if(!tf(e)&&!s)throw Error("message has a wrong format.");if(!tf(n))throw Error("accountAddress shall be a BigNumberish");let o=s?r4(e,n):e8(e),c=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","is invalid, with respect to the public key","INVALID_SIG"]};for(let e of r?[r]:["isValidSignature","is_valid_signature"])try{let r=await this.callContract({contractAddress:e8(n),entrypoint:e,calldata:nS.compile({hash:e3(o).toString(),signature:ra(t)})});if(c.nokResponse.includes(r[0].toString()))return!1;if(0===c.okResponse.length||c.okResponse.includes(r[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(c.error.some(t=>e.message.includes(t)))return!1;i=e}throw Error(`Signature verification Error: ${i}`)}async isClassDeclared(e,t){let n;if(!e.classHash&&"contract"in e)n=function(e){let t={...e};if(rg(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=n3(e.casm)),!t.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??n7(e.contract),!t.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}(e).classHash;else if(e.classHash)n=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(n,t) instanceof Object}catch(e){if(e instanceof eR)return!1;throw e}}async prepareInvocations(e){let t=[];for(let n of e)n.type===eL.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||t.unshift(n):t.push(n);return t}};I({},{StarknetIdContract:()=>ao,StarknetIdIdentityContract:()=>al,StarknetIdMulticallContract:()=>ad,StarknetIdPfpContract:()=>ag,StarknetIdPopContract:()=>ay,StarknetIdVerifierContract:()=>ap,dynamicCallData:()=>aT,dynamicFelt:()=>ab,execution:()=>aE,getStarknetIdContract:()=>ac,getStarknetIdIdentityContract:()=>au,getStarknetIdMulticallContract:()=>ah,getStarknetIdPfpContract:()=>am,getStarknetIdPopContract:()=>a_,getStarknetIdVerifierContract:()=>af,useDecoded:()=>ai,useEncoded:()=>as});var r9="abcdefghijklmnopqrstuvwxyz0123456789-",r7=BigInt(r9.length+1),ae="这来",at=BigInt(r9.length),an=BigInt(ae.length),ar=BigInt(ae.length+1);function aa(e){let t=0;for(;e.endsWith(ae[ae.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function ai(e){let t="";return(e.forEach(e=>{for(;e!==en;){let n=e%r7;if(e/=r7,n===BigInt(r9.length)){let n=e/ar;if(n===en){let r=e%ar;e=n,r===en?t+=r9[0]:t+=ae[Number(r)-1]}else t+=ae[Number(e%an)],e/=an}else t+=r9[Number(n)]}let[n,r]=aa(t);r&&(t=n+(r%2==0?ae[ae.length-1].repeat(r/2-1)+ae[0]+r9[1]:ae[ae.length-1].repeat((r-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function as(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(ae[0]+r9[1])){let[t,n]=aa(e.substring(0,e.length-2));e=t+ae[ae.length-1].repeat(2*(n+1))}else{let[t,n]=aa(e);n&&(e=t+ae[ae.length-1].repeat(1+2*(n-1)))}for(let r=0;r<e.length;r+=1){let a=e[r],i=r9.indexOf(a),s=BigInt(r9.indexOf(a));-1!==i?r===e.length-1&&e[r]===r9[0]?(t+=n*at,n*=r7*r7):(t+=n*s,n*=r7):-1!==ae.indexOf(a)&&(t+=n*at,n*=r7,t+=n*BigInt(+(r===e.length-1)+ae.indexOf(a)),n*=an)}return t}var ao={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function ac(e){switch(e){case"0x534e5f4d41494e":return ao.MAINNET;case"0x534e5f5345504f4c4941":return ao.TESTNET_SEPOLIA;default:throw Error("Starknet.id is not yet deployed on this network")}}var al={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function au(e){switch(e){case"0x534e5f4d41494e":return al.MAINNET;case"0x534e5f5345504f4c4941":return al.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var ad="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function ah(e){switch(e){case"0x534e5f4d41494e":case"0x534e5f5345504f4c4941":return ad;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var ap={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function af(e){switch(e){case"0x534e5f4d41494e":return ap.MAINNET;case"0x534e5f5345504f4c4941":return ap.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var ag={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function am(e){switch(e){case"0x534e5f4d41494e":return ag.MAINNET;case"0x534e5f5345504f4c4941":return ag.TESTNET_SEPOLIA;default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var ay={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function a_(e){switch(e){case"0x534e5f4d41494e":return ay.MAINNET;case"0x534e5f5345504f4c4941":return ay.TESTNET_SEPOLIA;default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function aE(e,t,n){return new nn({Static:e,IfEqual:t?ne(t[0],t[1],t[2]):void 0,IfNotEqual:n?ne(n[0],n[1],n[2]):void 0})}function ab(e,t){return new nn({Hardcoded:e,Reference:t?ne(t[0],t[1]):void 0})}function aT(e,t,n){return new nn({Hardcoded:e,Reference:t?ne(t[0],t[1]):void 0,ArrayReference:n?ne(n[0],n[1]):void 0})}var aA=class e{async getStarkName(t,n){return e.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return e.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,a,i,s,o){return e.getStarkProfile(this,t,n,r,a,i,s,o)}static async getStarkName(e,t,n){let r=await e.getChainId(),a=n??ac(r);try{let n=(await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:nS.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1),r=ai(n);if(!r)throw Error("Starkname not found");return r}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,n){let r=await e.getChainId(),a=n??ac(r);try{let n=t.replace(".stark","").split(".").map(e=>as(e).toString(10));return(await e.callContract({contractAddress:a,entrypoint:"domain_to_address",calldata:nS.compile({domain:n,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,n,r,a,i,s,o){let c=await e.getChainId(),l=n??ac(c),u=r??au(c),d=a??af(c),h=i??am(c),p=s??a_(c),f=o??ah(c);try{let n=[{execution:aE({}),to:aT(l),selector:aT(ty("address_to_domain")),calldata:[aT(t),aT("0")]},{execution:aE({}),to:ab(l),selector:ab(ty("domain_to_id")),calldata:[aT(void 0,void 0,[0,0])]},{execution:aE({}),to:ab(u),selector:ab(ty("get_verifier_data")),calldata:[aT(void 0,[1,0]),aT(tC("twitter")),aT(d),aT("0")]},{execution:aE({}),to:ab(u),selector:ab(ty("get_verifier_data")),calldata:[aT(void 0,[1,0]),aT(tC("github")),aT(d),aT("0")]},{execution:aE({}),to:ab(u),selector:ab(ty("get_verifier_data")),calldata:[aT(void 0,[1,0]),aT(tC("discord")),aT(d),aT("0")]},{execution:aE({}),to:ab(u),selector:ab(ty("get_verifier_data")),calldata:[aT(void 0,[1,0]),aT(tC("proof_of_personhood")),aT(p),aT("0")]},{execution:aE({}),to:ab(u),selector:ab(ty("get_verifier_data")),calldata:[aT(void 0,[1,0]),aT(tC("nft_pp_contract")),aT(h),aT("0")]},{execution:aE({}),to:ab(u),selector:ab(ty("get_extended_verifier_data")),calldata:[aT(void 0,[1,0]),aT(tC("nft_pp_id")),aT("2"),aT(h),aT("0")]},{execution:aE(void 0,void 0,[6,0,0]),to:ab(void 0,[6,0]),selector:ab(ty("tokenURI")),calldata:[aT(void 0,[7,1]),aT(void 0,[7,2])]}],r=await e.callContract({contractAddress:f,entrypoint:"aggregate",calldata:nS.compile({calls:n})});if(Array.isArray(r)){let e=parseInt(r[0],16),t=[],n=1;for(let a=0;a<e;a+=1)if(n<r.length){let e=parseInt(r[n],16);n+=1;let a=r.slice(n,n+e);t.push(a),n+=e}else break;let a=ai(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0],l=("0x9"===r[0]?t[8].slice(1).map(e=>tN(e)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`;return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:c,profilePicture:l}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}};(0,_.c_)(r8,aA),new r8({default:!0});var aI={};function av(e){return new tV(e).toBigInt()}function ak(e){return tV.is(e)}function aS(e){return new tV(e).toUint256HexString()}function aw(e){return"event"===e.type}function aC(e){return t4(e)?function(e){let t=e.filter(e=>aw(e)&&"struct"===e.kind),n=e.filter(e=>aw(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let r=[],{name:a}=t,i=!1,s=e=>e.type===a;for(;;){let e=n.find(e=>e.variants.some(s));if(eQ(e))break;let t=e.variants.find(s);r.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===r.length)throw Error("inconsistency in ABI events definition.");i&&(r=[r[r.length-1]]);let o=r.pop(),c={[G(u.keccak(U(o)).toString(16))]:t};for(;r.length>0;)c={[G(u.keccak(U(r.pop())).toString(16))]:c};return function e(t,n){let r={...t};return e6(t)&&e6(n)&&Object.keys(n).forEach(a=>{e6(n[a])&&a in t?r[a]=e(t[a],n[a]):Object.assign(r,{[a]:n[a]})}),r}(e,c={...c})},{})}(e):e.filter(e=>"event"===e.type).reduce((e,t)=>{let n=t.name,r={...t};return r.name=n,{...e,[G(u.keccak(U(n)).toString(16))]:r}},{})}function aN(e,t,n,r){return e.flat().reduce((e,a)=>{let i=t[a.keys.shift()??0];if(!i)return e;for(;!i.name;){let e=a.keys.shift();ez(!!e,'Not enough data in "keys" property of this event.'),i=i[e]}let s={};s[i.name]={};let o=a.keys[Symbol.iterator](),c=a.data[Symbol.iterator](),l=i.members?.filter(e=>"key"===e.kind)||i.keys,u=i.members?.filter(e=>"data"===e.kind)||i.data;return l.forEach(e=>{s[i.name][e.name]=ny(o,e,n,r,s[i.name])}),u.forEach(e=>{s[i.name][e.name]=ny(c,e,n,r,s[i.name])}),"block_hash"in a&&(s.block_hash=a.block_hash),"block_number"in a&&(s.block_number=a.block_number),"transaction_hash"in a&&(s.transaction_hash=a.transaction_hash),e.push(s),e},[])}function aO(e){if(!e.events?.length)throw Error("UDC emitted event is empty");let t=e.events.find(e=>tn(e.from_address)===tn(e_.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}function ax(e){let t=e.calldata??[],n=Array.isArray(t)?t:nS.compile(t);return{to:e.contractAddress,selector:ty(e.entrypoint),calldata:n}}function aD(e,t){let n=ax(e);return"1"===t?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function aB(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,..."2"===t?{revision:"1"}:{}}}function aR(e,t,n,r,a){return"1"===a?{types:eG,primaryType:"OutsideExecution",domain:aB(e,a),message:{...t,nonce:n,calls_len:r.length,calls:r.map(e=>aD(e,a))}}:{types:eX,primaryType:"OutsideExecution",domain:aB(e,a),message:{Caller:t.caller,Nonce:n,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:r.map(e=>aD(e,a))}}}function aV(e){let t=e.outsideExecution,n=ra(e.signature);return nS.compile({outside_execution:t,signature:n})}async function aP(e,t,n){let r={contractAddress:e8(t),entrypoint:"supports_interface",calldata:[e8(n)]};try{let t=await e.callContract(r);return 0n!==BigInt(t[0])}catch{return!1}}function aL(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function aM(e){return e.request({type:"wallet_getPermissions"})}function aF(e,t){return e.request({type:"wallet_watchAsset",params:t})}function aH(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function a$(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function aU(e){return e.request({type:"wallet_requestChainId"})}function aj(e){return e.request({type:"wallet_deploymentData"})}function aK(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function aq(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function aY(e,t){return e.request({type:"wallet_signTypedData",params:t})}function aW(e){return e.request({type:"wallet_supportedSpecs"})}function aG(e,t){e.on("accountsChanged",t)}function aX(e,t){e.on("networkChanged",t)}I(aI,{UINT_128_MAX:()=>tB,UINT_256_MAX:()=>tR,bnToUint256:()=>aS,isUint256:()=>ak,uint256ToBN:()=>av}),I({},{getAbiEvents:()=>aC,isAbiEvent:()=>aw,parseEvents:()=>aN,parseUDCEvent:()=>aO}),I({},{buildExecuteFromOutsideCallData:()=>aV,getOutsideCall:()=>ax,getTypedData:()=>aR}),I({},{supportsInterface:()=>aP}),I({},{addDeclareTransaction:()=>aq,addInvokeTransaction:()=>aK,addStarknetChain:()=>aH,deploymentData:()=>aj,getPermissions:()=>aM,onAccountChange:()=>aG,onNetworkChanged:()=>aX,requestAccounts:()=>aL,requestChainId:()=>aU,signMessage:()=>aY,supportedSpecs:()=>aW,switchStarknetChain:()=>a$,watchAsset:()=>aF})}}]);