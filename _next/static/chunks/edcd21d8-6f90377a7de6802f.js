"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14],{1407:(e,t,r)=>{r.d(t,{AA:()=>S,Gm:()=>tv,M:()=>a8,NZ:()=>ib,bd:()=>aP,bu:()=>eX,bx:()=>aU,fg:()=>ig,gD:()=>a7});var n=r(1659),a=r(2068),i=r(8409),s=r(9139),o=r(2232),c=r(5630),l=r(2418),d=r(7633),u=r(2328),h=r(4650),p=r(1458),f=r(2755),g=r(4938),y=r(6262),m=r(7449),_=r(3788),b=r(55);r(1861).hp;var E=Object.defineProperty,v=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,A=Object.prototype.hasOwnProperty,T=(e,t)=>{for(var r in t)E(e,r,{get:t[r],enumerable:!0})},S={};T(S,{ADDR_BOUND:()=>X,API_VERSION:()=>Y,BaseUrl:()=>eo,DEFAULT_GLOBAL_CONFIG:()=>eh,HARDENING_4BYTES:()=>es,HARDENING_BYTE:()=>ei,IS_BROWSER:()=>C,MASK_250:()=>W,MASK_31:()=>q,MAX_STORAGE_ITEM_SIZE:()=>z,NetworkName:()=>ec,OutsideExecutionCallerAny:()=>er,PAYMASTER_RPC_NODES:()=>ef,PRIME:()=>G,RANGE_FELT:()=>Z,RANGE_I128:()=>Q,RANGE_U128:()=>ee,RPC_DEFAULT_NODES:()=>ep,SNIP9_V1_INTERFACE_ID:()=>en,SNIP9_V2_INTERFACE_ID:()=>ea,SYSTEM_MESSAGES:()=>eg,StarknetChainId:()=>el,SupportedRpcVersion:()=>eu,TEXT_TO_FELT_MAX_LEN:()=>H,TRANSACTION_VERSION:()=>j,TransactionHashPrefix:()=>ed,UDC:()=>et,ZERO:()=>K});var I={};T(I,{JRPC:()=>k,PAYMASTER_API:()=>o,RPCSPEC07:()=>n,RPCSPEC08:()=>i});var k={};((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of w(t))A.call(e,a)||a===r||E(e,a,{get:()=>t[a],enumerable:!(n=v(t,a))||n.enumerable});return})(I,i,"default"),T({},{IS_BROWSER:()=>C,addHexPrefix:()=>P,arrayBufferToString:()=>N,atobUniversal:()=>x,btoaUniversal:()=>V,buf2hex:()=>D,calcByteLength:()=>F,concatenateArrayBuffer:()=>U,padLeft:()=>R,pascalToSnake:()=>$,removeHexPrefix:()=>B,sanitizeBytes:()=>L,sanitizeHex:()=>M,utf8ToArray:()=>O});var C="undefined"!=typeof window;function N(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function O(e){return new TextEncoder().encode(e)}function x(e){return c.K3.decode(e)}function V(e){return c.K3.encode(new Uint8Array(e))}function D(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function B(e){return e.replace(/^0x/i,"")}function P(e){return`0x${B(e)}`}function R(e,t,r="0"){return function(e,t,r,n="0"){let a=t-e.length,i=e;if(a>0){let t=n.repeat(a);i=r?t+e:e+t}return i}(e,t,!0,r)}function F(e,t=8){let{length:r}=e,n=r%t;return n?(r-n)/t*t+t:r}function L(e,t=8,r="0"){return R(e,F(e,t),r)}function M(e){let t=L(B(e),2);return t?P(t):t}var $=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function U(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.byteLength}),t}var H=31,{ETransactionVersion:j}=i,K=0n,W=2n**250n-1n,q=2n**31n-1n,Y=K,G=2n**251n+17n*2n**192n+1n,z=256n,X=2n**251n-z,J=(e,t)=>({min:e,max:t}),Z=J(K,G-1n),Q=J(-(2n**127n),2n**127n-1n),ee=J(K,2n**128n-1n),et={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},er="0x414e595f43414c4c4552",en="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",ea="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",ei=128,es=2147483648n,eo={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},ec={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},el={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},ed={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},eu={"0.7.1":"0.7.1","0.8.1":"0.8.1",v0_7_1:"0.7.1",v0_8_1:"0.8.1"},eh={legacyMode:!1,rpcVersion:"0.8.1",transactionVersion:I.ETransactionVersion.V3,logLevel:"INFO",feeMarginPercentage:{bounds:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},maxFee:50},fetch:void 0,websocket:void 0},ep={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},ef={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},eg={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8 do not support legacy transactions",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead"},ey=(class e{static instance;config;constructor(){this.initialize()}initialize(){this.config={...eh}}static getInstance(){return e.instance||(e.instance=new e),e.instance}get(e,t){return this.config[e]??t}set(e,t){this.config[e]=t}update(e){this.config={...this.config,...e}}getAll(){return{...this.config}}reset(){this.initialize()}delete(e){delete this.config[e]}hasKey(e){return e in this.config}}).getInstance(),em={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},e_=(class e{static instance;config;constructor(){this.config=ey}static getInstance(){return e.instance||(e.instance=new e),e.instance}getTimestamp(){return new Date().toISOString()}shouldLog(e){return e<=em[this.config.get("logLevel","INFO")]}formatMessage(e){let{level:t,message:r,timestamp:n,data:a}=e,i=`[${n}] ${t}: ${r}`;if(a)try{i+=`
${JSON.stringify(a,null,2)}`}catch(e){i+=`
[JSON.stringify Error/Circular]: ${e}`}return i}log(e,t,r){if(!this.shouldLog(em[e]))return;let n={level:e,message:t,timestamp:this.getTimestamp(),data:r},a=this.formatMessage(n);switch(e){case"DEBUG":console.debug(a);break;case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":case"FATAL":console.error(a);break;case"OFF":break;default:console.log(a)}}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t){this.log("WARN",e,t)}error(e,t){this.log("ERROR",e,t)}fatal(e,t){this.log("FATAL",e,t)}setLogLevel(e){this.config.set("logLevel",e)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(em).filter(e=>this.shouldLog(em[e])&&"OFF"!==e)}}).getInstance(),eb={};T(eb,{RpcChannel:()=>nz}),T({},{BlockStatus:()=>eT,BlockTag:()=>eS,EDAMode:()=>eO,EDataAvailabilityMode:()=>eN,ETH_ADDRESS:()=>eL,ETransactionExecutionStatus:()=>eB,ETransactionStatus:()=>eD,ETransactionVersion:()=>eI,ETransactionVersion2:()=>ek,ETransactionVersion3:()=>eC,EntryPointType:()=>eE,Literal:()=>eF,NON_ZERO_PREFIX:()=>eM,OutsideExecutionTypesV1:()=>e$,OutsideExecutionTypesV2:()=>eU,OutsideExecutionVersion:()=>eH,RPC:()=>I,TransactionExecutionStatus:()=>eA,TransactionFinalityStatus:()=>ew,TransactionType:()=>ev,TypedDataRevision:()=>l.K,Uint:()=>eR,ValidateType:()=>eP,isRPC08_FeeEstimate:()=>ex,isRPC08_ResourceBounds:()=>eV});var eE={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},ev={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},ew={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},eA={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},eT={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},eS={PENDING:"pending",LATEST:"latest"},{ETransactionVersion:eI}=i,{ETransactionVersion2:ek}=i,{ETransactionVersion3:eC}=i,{EDataAvailabilityMode:eN}=i,{EDAMode:eO}=i;function ex(e){return"l1_data_gas_consumed"in e}function eV(e){return"l1_data_gas"in e}var{ETransactionStatus:eD}=i,{ETransactionExecutionStatus:eB}=i,eP={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},eR={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},eF={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},eL="core::starknet::eth_address::EthAddress",eM="core::zeroable::NonZero::",e$={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},eU={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},eH={UNSUPPORTED:"0",V1:"1",V2:"2"};T({},{parse:()=>eK,parseAlwaysAsBig:()=>eW,stringify:()=>eq});var ej=e=>{if(!d.Fq(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},eK=e=>d.qg(String(e),void 0,ej),eW=e=>d.qg(String(e),void 0,d.z3),eq=(e,t,r,n)=>d.As(e,t,r,n),eY=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;constructor(e){this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,r){let n={id:r??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e,params:t??void 0};return this.pendingRequests[n.id]=n,n.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:eq(e),headers:this.headers})).json()}async fetch(e,t,r){let n=this.addPendingRequest(e,t,r);await this.wait();let a=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[n]){let e=this.sendBatch(Object.values(a));Object.keys(a).forEach(t=>{this.batchPromises[t]=e})}let i=await this.batchPromises[n];delete this.batchPromises[n];let s=i.find(e=>e.id===n);if(!s)throw Error(`Couldn't find the result for the request. Method: ${e}`);return s}};function eG(e,t){if(!e)throw Error(t||"Assertion failure")}function ez(e,t){if(!e)if(0===t.length)t();else throw Error("AssertionX failure: message function should not require arguments")}var eX={};T(eX,{addPercent:()=>tu,assertInRange:()=>tr,bigNumberishArrayToDecimalStringArray:()=>tn,bigNumberishArrayToHexadecimalStringArray:()=>ta,cleanHex:()=>tt,getDecimalString:()=>ts,getHexString:()=>to,getHexStringArray:()=>tc,hexToBytes:()=>td,hexToDecimalString:()=>te,isBigNumberish:()=>tp,isHex:()=>e6,isStringWholeNumber:()=>ti,stringToSha256ToArrayBuff4:()=>th,toBigInt:()=>e5,toCairoBool:()=>tl,toHex:()=>e4,toHex64:()=>e7,toHexString:()=>e8,toStorageKey:()=>e9,tryToBigInt:()=>e3});var eJ=e=>void 0===e||void 0===e;function eZ(e){return"number"==typeof e}function eQ(e){return"boolean"==typeof e}function e0(e){return"bigint"==typeof e}function e1(e){return"string"==typeof e}function e2(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function e6(e){return/^0x[0-9a-f]*$/i.test(e)}function e5(e){return BigInt(e)}function e3(e){return e?BigInt(e):void 0}function e4(e){return P(e5(e).toString(16))}var e8=e4;function e9(e){return P(e5(e).toString(16).padStart(64,"0"))}function e7(e){let t=P(e5(e).toString(16).padStart(64,"0"));if(66!==t.length)throw TypeError("number is too big for hex 0x(64) representation");return t}function te(e){return BigInt(P(e)).toString(10)}function tt(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function tr(e,t,r,n=""){let a=""===n?"invalid length":`invalid ${n} length`,i=BigInt(e),s=BigInt(t),o=BigInt(r);eG(i>=s&&i<=o,`Message not signable, ${a}.`)}function tn(e){return e.map(e=>e5(e).toString(10))}function ta(e){return e.map(e=>e4(e))}function ti(e){return/^\d+$/.test(e)}function ts(e){if(e6(e))return te(e);if(ti(e))return e;throw Error(`${e} needs to be a hex-string or whole-number-string`)}function to(e){if(e6(e))return e;if(ti(e))return e8(e);throw Error(`${e} needs to be a hex-string or whole-number-string`)}function tc(e){return e.map(to)}function tl(e){return(+e).toString()}function td(e){if(!e6(e))throw Error(`${e} needs to be a hex-string`);let t=B(e);return t.length%2!=0&&(t=`0${t}`),(0,u.aT)(t)}function tu(e,t){let r=BigInt(e);return r+r*BigInt(t)/100n}function th(e){return td(e4(Number(BigInt(P(D((0,h.sc)(e))))&q)))}function tp(e){return eZ(e)||e0(e)||e1(e)&&(e6(e)||ti(e))}function tf(e){let t=B(e4(BigInt(e))),r=t.length%2==0?t:`0${t}`;return P((0,p.keccak)(td(P(r))).toString(16))}function tg(e){return BigInt(P((0,p.keccak)(O(e)).toString(16)))&W}function ty(e){return e4(tg(e))}function tm(e){return eZ(e)||e0(e)?e4(e):e6(e)?e:ti(e)?e4(e):ty(e)}function t_(e){let t=P(e.reduce((e,t)=>e+B(e4(t)).padStart(64,"0"),""));return P((0,u.My)((0,f.lY)(td(t))))}function tb(e,t,r,n,a){return t_([e,t,a,r,n.length,...n])}function tE(e,t,r){return t_([e,t,r.length,...r])}T({},{getL1MessageHash:()=>tE,getL2MessageHash:()=>tb,getSelector:()=>tm,getSelectorFromName:()=>ty,keccakBn:()=>tf,solidityUint256PackedKeccak256:()=>t_,starknetKeccak:()=>tg});var tv={};function tw(e){return/^[\x00-\x7F]*$/.test(e)}function tA(e){return e.length<=H}function tT(e){return/^[0-9]*$/i.test(e)}function tS(e){return e1(e)&&!e6(e)&&!ti(e)}T(tv,{decodeShortString:()=>tO,encodeShortString:()=>tN,isASCII:()=>tw,isDecimalString:()=>tT,isLongText:()=>tk,isShortString:()=>tA,isShortText:()=>tI,isText:()=>tS,splitLongString:()=>tC});var tI=e=>tS(e)&&tA(e),tk=e=>tS(e)&&!tA(e);function tC(e){let t=RegExp(`[^]{1,${H}}`,"g");return e.match(t)||[]}function tN(e){if(!tw(e))throw Error(`${e} is not an ASCII string`);if(!tA(e))throw Error(`${e} is too long`);return P(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function tO(e){if(!tw(e))throw Error(`${e} is not an ASCII string`);if(e6(e))return B(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(tT(e))return tO("0X".concat(BigInt(e).toString(16)));throw Error(`${e} is not Hex or decimal`)}function tx(e){let t=0n===BigInt(e.pending_word)?"":tO(e4(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":tO(e4(t))),"")+t}function tV(e){let t=tC(e),r=t[t.length-1],n=t.map(tN),[a,i]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:a,pending_word_len:i}}T({},{byteArrayFromString:()=>tV,stringFromByteArray:()=>tx});var tD={};function tB(e){if(e0(e)||Number.isInteger(e))return e.toString();if(e1(e)){if(e6(e))return BigInt(e).toString();if(tS(e)){if(!tA(e))throw Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(tN(e)).toString()}if(ti(e))return e}if(eQ(e))return`${+e}`;throw Error(`${e} can't be computed by felt()`)}T(tD,{felt:()=>rn,getAbiContractVersion:()=>t7,getArrayType:()=>t4,isCairo1Abi:()=>t8,isCairo1Type:()=>t3,isLen:()=>t$,isTypeArray:()=>tH,isTypeBool:()=>tZ,isTypeByteArray:()=>t2,isTypeBytes31:()=>t1,isTypeContractAddress:()=>tQ,isTypeEnum:()=>tq,isTypeEthAddress:()=>t0,isTypeFelt:()=>tU,isTypeLiteral:()=>tJ,isTypeNamedTuple:()=>tK,isTypeNonZero:()=>t9,isTypeOption:()=>tY,isTypeResult:()=>tG,isTypeSecp256k1Point:()=>t5,isTypeStruct:()=>tW,isTypeTuple:()=>tj,isTypeU96:()=>t6,isTypeUint:()=>tz,isTypeUint256:()=>tX,tuple:()=>rr,uint256:()=>re,uint512:()=>rt});var tP=(1n<<128n)-1n,tR=(1n<<256n)-1n,tF=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){let r=e.validateProps(t[0].low,t[0].high);this.low=r.low,this.high=r.high}else if(1===t.length){let r=e.validate(t[0]);this.low=r&tP,this.high=r>>128n}else if(2===t.length){let r=e.validateProps(t[0],t[1]);this.low=r.low,this.high=r.high}else throw Error("Incorrect constructor parameters")}static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>tR)throw Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){let r=BigInt(e),n=BigInt(t);if(r<0n||r>0xffffffffffffffffffffffffffffffffn)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(n<0n||n>0xffffffffffffffffffffffffffffffffn)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:r,high:n}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:P(this.low.toString(16)),high:P(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[tB(this.low),tB(this.high)]}},tL=(1n<<512n)-1n,tM=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){let r=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===t.length){let r=e.validate(t[0]);this.limb0=r&tP,this.limb1=(r&tP<<128n)>>128n,this.limb2=(r&tP<<256n)>>256n,this.limb3=r>>384n}else if(4===t.length){let r=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>tL)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,r,n){let a=BigInt(e),i=BigInt(t),s=BigInt(r),o=BigInt(n);return[a,i,s,o].forEach((e,t)=>{if(e<0n||e>tP)throw Error(`limb${t} is not in the range of a u128 number`)}),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:P(this.limb0.toString(16)),limb1:P(this.limb1.toString(16)),limb2:P(this.limb2.toString(16)),limb3:P(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[tB(this.limb0),tB(this.limb1),tB(this.limb2),tB(this.limb3)]}},t$=e=>/_len$/.test(e),tU=e=>"felt"===e||"core::felt252"===e,tH=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),tj=e=>/^\(.*\)$/i.test(e),tK=e=>/\(.*\)/i.test(e)&&e.includes(":"),tW=(e,t)=>e in t,tq=(e,t)=>e in t,tY=e=>e.startsWith("core::option::Option::"),tG=e=>e.startsWith("core::result::Result::"),tz=e=>Object.values(eR).includes(e),tX=e=>tF.isAbiType(e),tJ=e=>Object.values(eF).includes(e),tZ=e=>"core::bool"===e,tQ=e=>e===eF.ContractAddress,t0=e=>e===eL,t1=e=>"core::bytes_31::bytes31"===e,t2=e=>"core::byte_array::ByteArray"===e,t6=e=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===e,t5=e=>e===eF.Secp256k1Point,t3=e=>e.includes("::"),t4=e=>t3(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function t8(e){let{cairo:t}=t7(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function t9(e){return e.startsWith(eM)}function t7(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>("function"===e.type||"constructor"===e.type)&&(e.inputs.length||e.outputs.length));return t?t3((t.inputs.length?t.inputs:t.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var re=e=>new tF(e).toUint256DecimalString(),rt=e=>new tM(e).toUint512DecimalString(),rr=(...e)=>({...e});function rn(e){return tB(e)}var ra=class{variant;constructor(e){let t=Object.values(e);if(0===t.length)throw Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>!eJ(e)).length)throw Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find(e=>!eJ(e))}activeVariant(){let e=Object.entries(this.variant).find(e=>!eJ(e[1]));return eJ(e)?"":e[0]}},ri={Some:0,None:1},rs=class{Some;None;constructor(e,t){if(!(e in Object.values(ri)))throw Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===ri.Some){if(eJ(t))throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!eJ(this.Some)}isNone(){return!0===this.None}},ro={Ok:0,Err:1},rc=class{Ok;Err;constructor(e,t){if(!(e in Object.values(ro)))throw Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===ro.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!eJ(this.Ok))return this.Ok;if(!eJ(this.Err))return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!eJ(this.Ok)}isErr(){return!eJ(this.Err)}},rl={isBN:(e,t,r)=>{if(!e0(e[r]))throw Error(`Data and formatter mismatch on ${r}:${t[r]}, expected response data ${r}:${e[r]} to be BN instead it is ${typeof e[r]}`)},unknown:(e,t,r)=>{throw Error(`Unhandled formatter type on ${r}:${t[r]} for data ${r}:${e[r]}`)}},rd=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce((e,t)=>t$(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},ru=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){let t=this.abi.find(e=>"interface"===e.type);return t?.items?.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}};function rh(e){var t;let r=(t=e).find(e=>"interface"===e.type)?2:+!!t8(t);if(0===r||1===r)return new rd(e);if(2===r)return new ru(e);throw Error(`Unsupported ABI version ${r}`)}function rp(e,t,r){return"constructor"===e&&!r&&!t.length}function rf(e,t,r){for(let n=0,a=0;n<e.length;n++)if(e[n]===t)a++;else if(e[n]===r&&0==--a)return n;return 1/0}function rg(e){return t3(e)?function(e){let t,r=e.slice(1,-1),n=[],a=0;for(;a<r.length;){switch(!0){case"("===r[a]:t=a+rf(r.slice(a),"(",")")+1;break;case r.startsWith("core::result::Result::<",a)||r.startsWith("core::array::Array::<",a)||r.startsWith("core::option::Option::<",a):t=a+rf(r.slice(a),"<",">")+1;break;default:{let e=r.indexOf(",",a);t=-1!==e?e:1/0}}n.push(r.slice(a,t)),a=t+2}return n}(e):function(e){let{subTuple:t,result:r}=function(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],r="",n=0;for(;n<e.length;){if("("===e[n]){let a=1,i=n;for(n++;a;)")"===e[n]&&a--,"("===e[n]&&a++,n++;t.push(e.substring(i,n)),r+=" ",n--}else r+=e[n];n++}return{subTuple:t,result:r}}(e.replace(/\s/g,"").slice(1,-1)),n=r.split(",").map(e=>t.length?e.replace(" ",t.shift()):e);return tK(e)&&(n=n.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),r=e.substring(t.length+1);return{name:t,type:r}}(t)),[])),n}(e)}var ry=class e{content;arrayType;constructor(t,r){eG(e.isTypeFixedArray(r),`The type ${r} is not a Cairo fixed array. Needs [type; length].`);try{e.getFixedArrayType(r)}catch{throw Error(`The type ${r} do not includes any content type. Needs [type; length].`)}try{e.getFixedArraySize(r)}catch{throw Error(`The type ${r} type do not includes any length. Needs [type; length].`)}eG(e.getFixedArraySize(r)===t.length,`The ABI type ${r} is expecting ${e.getFixedArraySize(r)} items. ${t.length} items provided.`),this.content=t,this.arrayType=r}static getFixedArraySize(e){let t=e.match(/(?<=; )\d+(?=\])/);if(null===t)throw Error(`ABI type ${e} do not includes a valid number after ';' character.`);return Number(t[0])}getFixedArraySize(){return e.getFixedArraySize(this.arrayType)}static getFixedArrayType=e=>{let t=e.match(/(?<=\[).+(?=;)/);if(null===t)throw Error(`ABI type ${e} do not includes a valid type of data.`);return t[0]};getFixedArrayType(){return e.getFixedArrayType(this.arrayType)}static compile(e){return e.reduce((e,t,r)=>(e[r]=t,e),{})}compile(){return e.compile(this.content)}static isTypeFixedArray(e){return/^\[.*;\s.*\]$/.test(e)&&/(?<=\[).+(?=;)/.test(e)&&/(?<=; )\d+(?=\])/.test(e)}};function rm(e,t){switch(!0){case tF.isAbiType(e):return new tF(t).toApiRequest();case tM.isAbiType(e):return new tM(t).toApiRequest();case t1(e):return tN(t.toString());case t5(e):{let e=B(e4(t)).padStart(128,"0"),r=re(P(e.slice(-64))),n=re(P(e.slice(0,-64)));return[tB(n.low),tB(n.high),tB(r.low),tB(r.high)]}default:return tB(t)}}function r_(e,t,r,n){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(ry.isTypeFixedArray(t)){let a=ry.getFixedArrayType(t),i=[];if(Array.isArray(e))i=new ry(e,t).content;else if("object"==typeof e)eG((i=Object.values(e)).length===ry.getFixedArraySize(t),`ABI type ${t}: object provided do not includes  ${ry.getFixedArraySize(t)} items. ${i.length} items provided.`);else throw Error(`ABI type ${t}: not an Array representing a cairo.fixedArray() provided.`);return i.reduce((e,t)=>e.concat(r_(t,a,r,n)),[])}if(Array.isArray(e)){let a=[];a.push(tB(e.length));let i=t4(t);return e.reduce((e,t)=>e.concat(r_(t,i,r,n)),a)}if(r[t]&&r[t].members.length){if(tF.isAbiType(t))return new tF(e).toApiRequest();if(tM.isAbiType(t))return new tM(e).toApiRequest();if(t0(t))return rm(t,e);if(t2(t)){let t=tV(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}let{members:a}=r[t];return a.reduce((t,a)=>t.concat(r_(e[a.name],a.type,r,n)),[])}if(tj(t))return(function(e,t){let r=rg(t),n=Object.values(e);if(n.length!==r.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${n}
      expected: ${r}`);return r.map((e,t)=>({element:n[t],type:e.type??e}))})(e,t).reduce((e,t)=>{let a=r_(t.element,t.type,r,n);return e.concat(a)},[]);if(tF.isAbiType(t))return new tF(e).toApiRequest();if(tM.isAbiType(t))return new tM(e).toApiRequest();if(tq(t,n)){let{variants:a}=n[t];if(tY(t)){if(e.isSome()){let t=a.find(e=>"Some"===e.name);if(eJ(t))throw Error("Error in abi : Option has no 'Some' variant.");let i=t.type;if("()"===i)return ri.Some.toString();let s=r_(e.unwrap(),i,r,n);return Array.isArray(s)?[ri.Some.toString(),...s]:[ri.Some.toString(),s]}return ri.None.toString()}if(tG(t)){if(e.isOk()){let t=a.find(e=>"Ok"===e.name);if(eJ(t))throw Error("Error in abi : Result has no 'Ok' variant.");let i=t.type;if("()"===i)return ro.Ok.toString();let s=r_(e.unwrap(),i,r,n);return Array.isArray(s)?[ro.Ok.toString(),...s]:[ro.Ok.toString(),s]}let t=a.find(e=>"Err"===e.name);if(eJ(t))throw Error("Error in abi : Result has no 'Err' variant.");let i=t.type;if("()"===i)return ro.Err.toString();let s=r_(e.unwrap(),i,r,n);return Array.isArray(s)?[ro.Err.toString(),...s]:[ro.Err.toString(),s]}let i=e.activeVariant(),s=a.find(e=>e.name===i);if(eJ(s))throw Error(`Not find in abi : Enum has no '${i}' variant.`);let o=s.type,c=a.findIndex(e=>e.name===i);if("()"===o)return c.toString();let l=r_(e.unwrap(),o,r,n);return Array.isArray(l)?[c.toString(),...l]:[c.toString(),l]}if(t9(t))return rm(t4(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return rm(t,e)}function rb(e,t){switch(!0){case tZ(e):return!!BigInt(t.next().value);case tF.isAbiType(e):return new tF(t.next().value,t.next().value).toBigInt();case tM.isAbiType(e):let r=t.next().value,n=t.next().value;return new tM(r,n,t.next().value,t.next().value).toBigInt();case t0(e):return BigInt(t.next().value);case t1(e):return tO(t.next().value);case t5(e):let a=B(t.next().value).padStart(32,"0"),i=B(t.next().value).padStart(32,"0"),s=B(t.next().value).padStart(32,"0");return BigInt(P(i+a+B(t.next().value).padStart(32,"0")+s));default:return BigInt(t.next().value)}}function rE(e,t,r,n){if("()"===t.type)return{};if(tF.isAbiType(t.type))return new tF(e.next().value,e.next().value).toBigInt();if(tM.isAbiType(t.type)){let t=e.next().value,r=e.next().value;return new tM(t,r,e.next().value,e.next().value).toBigInt()}if(t2(t.type)){let t=[],r=BigInt(e.next().value);for(;t.length<r;)t.push(e4(e.next().value));let n=e4(e.next().value);return tx({data:t,pending_word:n,pending_word_len:BigInt(e.next().value)})}if(ry.isTypeFixedArray(t.type)){let a=[],i={name:"",type:ry.getFixedArrayType(t.type)},s=ry.getFixedArraySize(t.type);for(;a.length<s;)a.push(rE(e,i,r,n));return a}if(tH(t.type)){let a=[],i={name:"",type:t4(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(rE(e,i,r,n));return a}if(t9(t.type))return rE(e,{name:"",type:t4(t.type)},r,n);if(r&&t.type in r&&r[t.type])return t0(t.type)?rb(t.type,e):r[t.type].members.reduce((t,a)=>(t[a.name]=rE(e,a,r,n),t),{});if(n&&t.type in n&&n[t.type]){let a=Number(e.next().value),i=n[t.type].variants.reduce((t,i,s)=>(s===a?t[i.name]=rE(e,{name:"",type:i.type},r,n):t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=a===ri.Some?i.Some:void 0;return new rs(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=a===ro.Ok?i.Ok:i.Err,new rc(a,e)}return new ra(i)}if(tj(t.type))return rg(t.type).reduce((t,a,i)=>{let s=a?.name?a.name:i,o=a?.type?a.type:a;return t[s]=rE(e,{name:s,type:o},r,n),t},{});if(tH(t.type)){let a=[],i={name:"",type:t4(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(rE(e,i,r,n));return a}return rb(t.type,e)}function rv(e,t,r,n,a){let{name:i,type:s}=t;switch(!0){case t$(i):return BigInt(e.next().value);case r&&s in r||tj(s):case n&&tq(s,n):case ry.isTypeFixedArray(s):return rE(e,t,r,n);case tH(s):if(t3(s))return rE(e,t,r,n);let o=[];if(a&&a[`${i}_len`]){let s=a[`${i}_len`];for(;o.length<s;)o.push(rE(e,{name:i,type:t.type.replace("*","")},r,n))}return o;case t9(s):return rE(e,t,r,n);default:return rb(s,e)}}var rw=(e,t)=>{if(eG(e1(e)||eZ(e)||e0(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),e1(e)&&!e6(e))return;let r=BigInt(e.toString(10));eG(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},rA=(e,t)=>{let r;switch(eZ(e)&&eG(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),eG(e1(e)||eZ(e)||e0(e)||e2(e)&&"low"in e&&"high"in e||e2(e)&&["limb0","limb1","limb2","limb3"].every(t=>t in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case eR.u256:r=new tF(e).toBigInt();break;case eR.u512:r=new tM(e).toBigInt();break;default:r=e5(e)}switch(t.type){case eR.u8:eG(r>=0n&&r<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case eR.u16:eG(r>=0n&&r<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case eR.u32:eG(r>=0n&&r<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case eR.u64:eG(r>=0n&&r<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case eR.u128:eG(r>=0n&&r<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case eR.u256:eG(r>=0n&&r<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case eR.u512:eG(tM.is(r),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case eF.ClassHash:case eF.ContractAddress:eG(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case eF.Secp256k1Point:eG(r>=0n&&r<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break;case eF.U96:eG(r>=0n&&r<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`)}},rT=(e,t)=>{eG(eQ(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},rS=(e,t,r)=>{if(t.type===eR.u256||t.type===eR.u512)return void rA(e,t);if(t0(t.type)){eG(!e2(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);let r=BigInt(e.toString(10));eG(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}eG(e2(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),r[t.type].members.forEach(({name:r})=>{eG(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},rI=(e,t)=>{eG(e2(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);let r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),n=[...Object.getOwnPropertyNames(e),...r];if(!(tY(t.type)&&n.includes("isSome")&&n.includes("isNone")||tG(t.type)&&n.includes("isOk")&&n.includes("isErr"))&&!(n.includes("variant")&&n.includes("activeVariant")))throw Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},rk=(e,t)=>{eG(e2(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},rC=(e,t,r,n)=>{let a=tH(t.type),i=a?t4(t.type):ry.getFixedArrayType(t.type);if(a&&tU(i)&&tk(e))return;let s=[];if(a)eG(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),s=e;else switch(!0){case Array.isArray(e):s=e;break;case"object"==typeof e:s=Object.values(e);break;default:throw Error(`Validate: arg ${t.name} should be an Array or an object.`)}switch(!0){case tU(i):s.forEach(e=>rw(e,t));break;case tj(i):s.forEach(e=>rk(e,{name:t.name,type:i}));break;case tH(i):s.forEach(e=>rC(e,{name:"",type:i},r,n));break;case tW(i,r):s.forEach(e=>rS(e,{name:t.name,type:i},r));break;case tq(i,n):s.forEach(e=>rI(e,{name:t.name,type:i}));break;case tz(i)||tJ(i):s.forEach(e=>rA(e,{name:"",type:i}));break;case tZ(i):s.forEach(e=>rT(e,t));break;default:throw Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${s}`)}};function rN(e,t,r,n){e.inputs.reduce((e,a)=>{let i=t[e];switch(!0){case t$(a.name):return e;case tU(a.type):rw(i,a);break;case t1(a.type):eG(e1(i),`Validate: arg ${a.name} should be a string.`),eG(i.length<32,`Validate: arg ${a.name} cairo typed ${a.type} should be a string of less than 32 characters.`);break;case tz(a.type)||tJ(a.type):rA(i,a);break;case tZ(a.type):rT(i,a);break;case t2(a.type):eG(e1(i),`Validate: arg ${a.name} should be a string.`);break;case tH(a.type)||ry.isTypeFixedArray(a.type):rC(i,a,r,n);break;case tW(a.type,r):rS(i,a,r);break;case tq(a.type,n):rI(i,a);break;case tj(a.type):rk(i,a);break;case t9(a.type):let s=t4(a.type);switch(eG(tz(s)&&s!==tM.abiSelector||tU(s),`Validate: ${a.name} type is not authorized for NonZero type.`),!0){case tU(s):rw(i,a),eG(BigInt(i.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case tz(s):rA(i,{name:"",type:s}),s===eR.u256?eG(new tF(i).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):eG(e5(i)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value "${i}"`)}break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${i}`)}return e+1},0)}var rO=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=rh(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,r=[]){e!==eP.DEPLOY&&eG(this.abi.filter(t=>{if("function"!==t.type)return!1;let r="view"===t.stateMutability||"view"===t.state_mutability;return e===eP.INVOKE?!r:r}).map(e=>e.name).includes(t),`${e===eP.INVOKE?"invocable":"viewable"} method not found in abi`);let n=this.abi.find(r=>e===eP.DEPLOY?r.name===t&&"constructor"===r.type:r.name===t&&"function"===r.type);if(rp(t,r,n))return;let a=this.parser.methodInputsLength(n);if(r.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${r.length}`);rN(n,r,this.structs,this.enums)}compile(e,t){let r,n=this.abi.find(t=>t.name===e);if(rp(e,t,n))return[];Array.isArray(t)?r=t:(r=Object.values(function(e,t,r,n){let a=(e,t)=>{if(ry.isTypeFixedArray(t)){var o,c=e,l=t;let r=ry.getFixedArrayType(l),n=ry.getFixedArraySize(l);if(Array.isArray(c)){if(n!==c.length)throw Error(`ABI type ${l}: array provided do not includes  ${n} items. ${c.length} items provided.`);return c.map(e=>a(e,r))}if(n!==Object.keys(c).length)throw Error(`ABI type ${l}: object provided do not includes  ${n} properties. ${Object.keys(c).length} items provided.`);return a(c,r)}if(tH(t)){var d=e,u=t;let r=t4(u);return e1(d)?d:d.map(e=>a(e,r))}if(tq(t,n))return s(e,n[t]);if(tj(t)){return o=e,rg(t).reduce((e,t,r)=>{let n,i=Object.keys(o),s=t?.type?t.type:t;return n=a(o[i[r]],s),Object.defineProperty(e,r.toString(),{enumerable:!0,value:n??o[i[r]]}),e},{})}if(t0(t)||t9(t)||t2(t)||t6(t)||t5(t))return e;if(tF.isAbiType(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:e.low,high:e.high}}if(tM.isAbiType(t)){if("object"!=typeof e)return e;if(!["limb0","limb1","limb2","limb3"].every(t=>t in e))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:e.limb0,limb1:e.limb1,limb2:e.limb2,limb3:e.limb3}}return tW(t,r)?i(e,r[t].members):e},i=(e,t)=>t.reduce((t,r)=>{let n;if("undefined"===e[r.name]&&(t3(r.type)||!t$(r.name)))throw Error(`Your object needs a property with key : ${r.name} .`);return n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n??e[r.name]}),t},{}),s=(e,t)=>{if(tG(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),n=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new rc(ro.Ok,a(e.unwrap(),r)):new rc(ro.Err,a(e.unwrap(),n))}if(tY(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new rs(ri.Some,a(e.unwrap(),r)):new rs(ri.None,{})}return new ra(Object.fromEntries(Object.entries(e.variant).map(r=>{if(eJ(r[1]))return r;let n=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===n?r:[r[0],a(e.unwrap(),n)]})))};return t.reduce((t,r)=>{let n;return t$(r.name)&&!t3(r.type)?t:(n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n}),t)},{})}(t,n.inputs,this.structs,this.enums)),rN(n,r,this.structs,this.enums));let a=r[Symbol.iterator](),i=n.inputs.reduce((e,t)=>t$(t.name)&&!t3(t.type)?e:e.concat(function(e,t,r,n){let{name:a,type:i}=t,{value:s}=e.next();switch(!0){case ry.isTypeFixedArray(i):if(!Array.isArray(s)&&"object"!=typeof s)throw Error(`ABI expected parameter ${a} to be an array or an object, got ${s}`);return r_(s,t.type,r,n);case tH(i):if(!Array.isArray(s)&&!tS(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return e1(s)&&(s=tC(s)),r_(s,t.type,r,n);case t9(i):return rm(t4(i),s);case t0(i):return rm(i,s);case tW(i,r)||tj(i)||tF.isAbiType(i):case tq(i,n):return r_(s,i,r,n);default:return rm(i,s)}}(a,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){let t,r=e=>{let t=(e,r=".")=>{let n=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(n).flatMap(([e,a])=>{let i=a;"entrypoint"===e?i=ty(i):tk(i)&&(i=tV(i));let s=Array.isArray(n)&&"0"===e?"$$len":e;if(e0(i))return[[`${r}${s}`,tB(i)]];if(Object(i)===i){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),n=[...Object.getOwnPropertyNames(i),...e];if(n.includes("isSome")&&n.includes("isNone")){let e=i,n=e.isSome()?ri.Some:ri.None;return e.isSome()?t({0:n,1:e.unwrap()},`${r}${s}.`):[[`${r}${s}`,tB(n)]]}if(n.includes("isOk")&&n.includes("isErr")){let e=i;return t({0:e.isOk()?ro.Ok:ro.Err,1:e.unwrap()},`${r}${s}.`)}if(n.includes("variant")&&n.includes("activeVariant")){let e=i,n=e.activeVariant(),a=Object.keys(e.variant).findIndex(e=>e===n);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${r}${s}`,tB(a)]]:t({0:a,1:e.unwrap()},`${r}${s}.`)}return t(i,`${r}${s}.`)}return[[`${r}${s}`,tB(i)]]})};return Object.fromEntries(t(e))};return Object.defineProperty(t=Array.isArray(e)?Object.values(r({...e})):Object.values(r(e)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:r}=this.abi.find(t=>t.name===e),n=t.flat()[Symbol.iterator](),a=r.flat().reduce((e,t,r)=>{let a=t.name??r;return e[a]=rv(n,t,this.structs,this.enums,e),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e},{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,r){return function e(t,r,n){return Object.entries(t).reduce((a,[i,s])=>{let o=n??r[i];if(!(i in r)&&!n)return a[i]=s,a;if("string"===o){if(Array.isArray(t[i])){let r=e(t[i],t[i].map(e=>o));return a[i]=Object.values(r).join(""),a}return rl.isBN(t,r,i),a[i]=tO(s),a}if("number"===o)return rl.isBN(t,r,i),a[i]=Number(s),a;if("function"==typeof o)return a[i]=o(s),a;if(Array.isArray(o)){let r=e(t[i],o,o[0]);return a[i]=Object.values(r),a}return e2(o)?a[i]=e(t[i],o):rl.unknown(t,r,i),a},{})}(this.parse(e,t),r)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map(e=>e4(e))}decodeParameters(e,t){let r=Array.isArray(e)?e:[e],n=t.flat()[Symbol.iterator](),a=r.map(e=>rv(n,{name:"",type:e},this.structs,this.enums));return 1===a.length?a[0]:a}};function rx(e){return[...e,e.length].reduce((e,t)=>p.pedersen(e5(e),e5(t)),0).toString()}function rV(e,t,r,n,a,i,s,o=[]){let c=[e,t,r,n,rx(a),i,s,...o];return rx(c)}function rD(e,t,r,n,a,i,s){return rV(ed.DECLARE,r,t,0,[e],n,a,[i,...s?[s]:[]])}function rB(e,t,r,n,a,i,s,o){let c=[t,n,...r];return rV(ed.DEPLOY_ACCOUNT,a,e,0,c,i,s,[o])}function rP(e,t,r,n,a,i){return rV(ed.INVOKE,t,e,0,r,n,a,[i])}function rR(e,t,r,n,a,i){let s=[e,...n];return rV(ed.L1_HANDLER,0,t,tm(r),s,0,a,[i])}T({},{calculateContractAddressFromHash:()=>r4,calculateDeclareTransactionHash:()=>rQ,calculateDeployAccountTransactionHash:()=>r0,calculateInvokeTransactionHash:()=>rZ,calculateL2MessageTxHash:()=>rR,computeCompiledClassHash:()=>nn,computeContractClassHash:()=>ns,computeHashOnElements:()=>r6,computeHintedClassHash:()=>r7,computeLegacyContractClassHash:()=>ne,computePedersenHash:()=>r1,computePedersenHashOnElements:()=>r5,computePoseidonHash:()=>r2,computePoseidonHashOnElements:()=>r3,computeSierraContractClassHash:()=>ni,formatSpaces:()=>r9,getL1MessageHash:()=>tE,getL2MessageHash:()=>tb,getSelector:()=>tm,getSelectorFromName:()=>ty,hashByteCodeSegments:()=>nr,keccakBn:()=>tf,poseidon:()=>g,solidityUint256PackedKeccak256:()=>t_,starknetKeccak:()=>tg}),T({},{calculateDeclareTransactionHash:()=>rD,calculateDeployAccountTransactionHash:()=>rB,calculateL2MessageTxHash:()=>rR,calculateTransactionHash:()=>rP,calculateTransactionHashCommon:()=>rV,computeHashOnElements:()=>rx}),T({},{starkCurve:()=>p,weierstrass:()=>y}),T({},{calculateDeclareTransactionHash:()=>rX,calculateDeployAccountTransactionHash:()=>rz,calculateInvokeTransactionHash:()=>rJ,calculateTransactionHashCommon:()=>rG,encodeDataResourceBoundsL1:()=>rW,encodeResourceBoundsL1:()=>rj,encodeResourceBoundsL2:()=>rK,hashDAMode:()=>rH,hashFeeField:()=>rq,hashFeeFieldV3B3:()=>rY});var rF=e=>e.map(e=>BigInt(e)),rL=64n+128n,rM=BigInt(tN("L1_GAS")),r$=BigInt(tN("L2_GAS")),rU=BigInt(tN("L1_DATA"));function rH(e,t){return(BigInt(e)<<32n)+BigInt(t)}function rj(e){return(rM<<rL)+(BigInt(e.l1_gas.max_amount)<<128n)+BigInt(e.l1_gas.max_price_per_unit)}function rK(e){return(r$<<rL)+(BigInt(e.l2_gas.max_amount)<<128n)+BigInt(e.l2_gas.max_price_per_unit)}function rW(e){return(rU<<rL)+(BigInt(e.l1_data_gas.max_amount)<<128n)+BigInt(e.l1_data_gas.max_price_per_unit)}function rq(e,t){let r=rj(t),n=rK(t);return(0,p.poseidonHashMany)([BigInt(e),r,n])}function rY(e,t){let r=rj(t),n=rK(t),a=rW(t);return(0,p.poseidonHashMany)([BigInt(e),r,n,a])}function rG(e,t,r,n,a,i,s,o,c,l,d=[]){let u=eV(l)?rY(i,l):rq(i,l),h=rH(o,c),f=rF([e,t,r,u,(0,p.poseidonHashMany)(rF(s)),n,a,h,...rF(d)]);return e4((0,p.poseidonHashMany)(f))}function rz(e,t,r,n,a,i,s,o,c,l,d,u){return rG(ed.DEPLOY_ACCOUNT,a,e,i,s,d,u,o,c,l,[(0,p.poseidonHashMany)(rF(r)),t,n])}function rX(e,t,r,n,a,i,s,o,c,l,d,u){return rG(ed.DECLARE,n,r,a,i,d,rF(u),o,c,l,[(0,p.poseidonHashMany)(rF(s)),e,t])}function rJ(e,t,r,n,a,i,s,o,c,l,d){return rG(ed.INVOKE,t,e,n,a,l,d,s,o,c,[(0,p.poseidonHashMany)(rF(i)),(0,p.poseidonHashMany)(rF(r))])}function rZ(e){return[I.ETransactionVersion.V3,I.ETransactionVersion.F3].includes(e.version)?rJ(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):rP(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function rQ(e){return[I.ETransactionVersion.V3,I.ETransactionVersion.F3].includes(e.version)?rX(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):rD(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function r0(e){return[I.ETransactionVersion.V3,I.ETransactionVersion.F3].includes(e.version)?rz(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):rB(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}function r1(e,t){return p.pedersen(BigInt(e),BigInt(t))}function r2(e,t){return e4(p.poseidonHash(BigInt(e),BigInt(t)))}function r6(e){return[...e,e.length].reduce((e,t)=>p.pedersen(BigInt(e),BigInt(t)),0).toString()}var r5=r6;function r3(e){return e4((0,p.poseidonHashMany)(e.map(e=>BigInt(e))))}function r4(e,t,r,n){let a=r6(rO.compile(r));return e4(BigInt(r6([tB("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,e,t,a]))%X)}function r8(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function r9(e){let t=!1,r=[];for(let n of e)'"'===n&&!1==(r.length>0&&"\\"===r.slice(-1)[0])&&(t=!t),t?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function r7(e){let{abi:t,program:r}=e,n=r9(eq({abi:t,program:r},r8));return P(p.keccak(O(n)).toString(16))}function ne(e){let t=e1(e)?eK(e):e,r=e4(Y),n=r6(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),a=r6(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=r6(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),s=r6(t.program.builtins.map(e=>tN(e))),o=r7(t),c=r6(t.program.data);return r6([r,n,a,i,s,o,c])}function nt(e){let t=e.flatMap(e=>{var t;return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,p.poseidonHashMany)(t.flatMap(e=>BigInt(tN(e)))))]});return(0,p.poseidonHashMany)(t)}function nr(e){let t=e.bytecode.map(e=>BigInt(e)),r=e.bytecode_segment_lengths??[],n=0,a=r.flatMap(e=>{let r=t.slice(n,n+=e);return[BigInt(e),(0,p.poseidonHashMany)(r)]});return 1n+(0,p.poseidonHashMany)(a)}function nn(e){let t=BigInt(tN("COMPILED_CLASS_V1")),r=nt(e.entry_points_by_type.EXTERNAL),n=nt(e.entry_points_by_type.L1_HANDLER),a=nt(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?nr(e):(0,p.poseidonHashMany)(e.bytecode.map(e=>BigInt(e)));return e4((0,p.poseidonHashMany)([t,r,n,a,i]))}function na(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]);return(0,p.poseidonHashMany)(t)}function ni(e){let t=BigInt(tN("CONTRACT_CLASS_V0.1.0")),r=na(e.entry_points_by_type.EXTERNAL),n=na(e.entry_points_by_type.L1_HANDLER),a=na(e.entry_points_by_type.CONSTRUCTOR),i=function(e){let t=r9(eq(e.abi,null));return BigInt(P(p.keccak(O(t)).toString(16)))}(e),s=(0,p.poseidonHashMany)(e.sierra_program.map(e=>BigInt(e)));return e4((0,p.poseidonHashMany)([t,r,n,a,i,s]))}function ns(e){let t=e1(e)?eK(e):e;return"sierra_program"in t?ni(t):ne(t)}function no(e){let t=e.version?e4(e.version):eI.V3;return t===eI.V3||t===eI.F3}function nc(e,t){let r=e.split("."),n=t.split(".");return r.every((e,t)=>"*"===e||e===n[t])}function nl(e,t={allowAnyPatchVersion:!1}){return Object.values(eu).some(r=>nc(t.allowAnyPatchVersion?function(e){let t=e.split(".");return t.length<3?e:`${t[0]}.${t[1]}.*`}(r):r,e))}function nd(e){let t=e1(e)?e:eq(e);return V((0,m.ZI)(t))}function nu(e){return Array.isArray(e)?e:eK(N((0,m.Aq)(x(e))))}function nh(){let e=p.utils.randomPrivateKey();return(0,p.getStarkKey)(e)}function np(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>e4(e));try{let{r:t,s:r}=e;return[e4(t),e4(r)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function nf(e){return tn(np(e))}function ng(e){return ta(np(e))}function ny(e,t=ey.get("feeMarginPercentage").maxFee){return tu(e,t)}function nm(e,t=ey.get("feeMarginPercentage").bounds,r){if(e0(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},...r&&nc("0.8",r)&&{l1_data_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}}};if(ex(e))return{l2_gas:{max_amount:e4(tu(e.l2_gas_consumed,t.l2_gas.max_amount)),max_price_per_unit:e4(tu(e.l2_gas_price,t.l2_gas.max_price_per_unit))},l1_gas:{max_amount:e4(tu(e.l1_gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:e4(tu(e.l1_gas_price,t.l1_gas.max_price_per_unit))},l1_data_gas:{max_amount:e4(tu(e.l1_data_gas_consumed,t.l1_data_gas.max_amount)),max_price_per_unit:e4(tu(e.l1_data_gas_price,t.l1_data_gas.max_price_per_unit))}};return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?e4(tu(BigInt(e.overall_fee)/BigInt(e.gas_price),t.l1_gas.max_amount)):e4(tu(e.gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:e4(tu(e.gas_price,t.l1_gas.max_price_per_unit))}}}function n_(e){return{l1_gas_consumed:0n,l1_gas_price:0n,l1_data_gas_consumed:0n,l1_data_gas_price:0n,l2_gas_consumed:0n,l2_gas_price:0n,overall_fee:K,unit:"FRI",suggestedMaxFee:K,resourceBounds:nm(K,void 0,e)}}function nb(e){if(e===eN.L1)return eO.L1;if(e===eN.L2)return eO.L2;throw Error("EDAM conversion")}function nE(e,t){let r=t?e4(t):void 0,n=e4(e);if(t&&!Object.values(eI).includes(r))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(eI).includes(n))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?r:n}function nv(e){if(!e)return;let t=e4(e);if(t===eI.V0)return eI.F0;if(t===eI.V1)return eI.F1;if(t===eI.V2)return eI.F2;if(t===eI.V3)return eI.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function nw(e,t){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||eN.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||eN.L1,resourceBounds:e.resourceBounds??nm(K,void 0,t)}}function nA(e){return e===eI.F2?eI.F1:e===eI.V2?eI.V1:e}function nT(e){let t=e4(e);return P(D((0,p.getPublicKey)(t,!1)))}function nS(e){return"sierra_program"in(e1(e)?eK(e):e)}function nI(e){let t={...e};if(nS(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=nn(e.casm)),!t.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??ns(e.contract),!t.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}T({},{ZEROFee:()=>n_,compressProgram:()=>nd,decompressProgram:()=>nu,estimateFeeToBounds:()=>nm,estimatedFeeToMaxFee:()=>ny,formatSignature:()=>np,getFullPublicKey:()=>nT,intDAM:()=>nb,randomAddress:()=>nh,reduceV2:()=>nA,signatureToDecimalArray:()=>nf,signatureToHexArray:()=>ng,toFeeVersion:()=>nv,toTransactionVersion:()=>nE,v3Details:()=>nw});var nk={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},nC=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){let{setPrototypeOf:r}=Object;r?r(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){let{captureStackTrace:r}=Error;r&&r(e,t)}(this)}},nN=class extends nC{},nO=class extends nN{constructor(e,t,r){super(`RPC: ${t} with params ${eq(r,null,2)}

      ${e.code}: ${e.message}: ${eq(e.data)}`),this.baseError=e,this.request={method:t,params:r}}request;get code(){return this.baseError.code}isType(e){return nk[e]===this.code}};function nx(){return M(D(_.bI.utils.randomPrivateKey()))}function nV(e){tr(e,K,2n**160n-1n,"Ethereum Address ");let t=P(B(e4(e)).padStart(40,"0"));return eG(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}T({},{ethRandomPrivateKey:()=>nx,validateAndParseEthAddress:()=>nV});var nD="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||"undefined"!=typeof global&&global.fetch.bind(global)||(()=>{throw new nN("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function nB(e){return new Promise(t=>{setTimeout(t,e)})}function nP(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=r9(eq(e.abi)),t.sierra_program=r9(eq(e.sierra_program)),t.sierra_program=nd(t.sierra_program),t}function nR(e){let t=e1(e)?eK(e):e;return nS(e)?nP(t):{...t,..."program"in t&&{program:nd(t.program)}}}T({},{Block:()=>nU,createSierraContractClass:()=>nP,getDefaultNodeUrl:()=>nF,getDefaultNodes:()=>nL,getSupportedRpcVersions:()=>nM,parseContract:()=>nR,validBlockTags:()=>n$,wait:()=>nB});var nF=(e,t=!1,r)=>{t||e_.info("Using default public node url, please provide nodeUrl in provider options!");let n=nL(r??ey.get("rpcVersion"))[e??ec.SN_SEPOLIA],a=Math.floor(Math.random()*n.length);return n[a]};function nL(e){let t={...ep};return Object.keys(t).forEach(function(r,n){t[r]=t[r].map(t=>`${t}${function(e){let[t,r]=e.replace(/^v/,"").split(".");return`v${t}_${r}`}(e)}`)}),t}function nM(){return[...new Set(Object.values(eu))]}var n$=Object.values(eS),nU=class{hash=null;number=null;tag=null;setIdentifier(e){if(e1(e))if(tT(e))this.number=parseInt(e,10);else if(e6(e))this.hash=e;else if(n$.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`);else e0(e)?this.hash=e4(e):eZ(e)?this.number=e:this.tag=eS.PENDING;if(eZ(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash};T({},{buildUDCCall:()=>nq,fromCallsToExecuteCalldata:()=>nj,fromCallsToExecuteCalldata_cairo1:()=>nK,getExecuteCalldata:()=>nW,getVersionsByType:()=>nY,transformCallsToMulticallArrays:()=>nH});var nH=e=>{let t=[],r=[];return e.forEach(e=>{let n=rO.compile(e.calldata||[]);t.push({to:e5(e.contractAddress).toString(10),selector:e5(ty(e.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:t,calldata:rO.compile({calldata:r})}},nj=e=>{let{callArray:t,calldata:r}=nH(e);return[...rO.compile({callArray:t}),...r]},nK=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:rO.compile(e.calldata)}));return rO.compile({orderCalls:t})},nW=(e,t="0")=>"1"===t?nK(e):nj(e);function nq(e,t){let r=[].concat(e).map(e=>{let{classHash:r,salt:n,unique:a=!0,constructorCalldata:i=[]}=e,s=rO.compile(i),o=n??nh();return{call:{contractAddress:et.ADDRESS,entrypoint:et.ENTRYPOINT,calldata:[r,o,tl(a),s.length,...s]},address:r4(a?p.pedersen(t,o):o,r,s,a?et.ADDRESS:0)}});return{calls:r.map(e=>e.call),addresses:r.map(e=>e.address)}}function nY(e){return"fee"===e?{v1:eI.F1,v2:eI.F2,v3:eI.F3}:{v1:eI.V1,v2:eI.V2,v3:eI.V3}}var nG={headers:{"Content-Type":"application/json"},blockIdentifier:eS.PENDING,retries:200},nz=class{id="RPC071";channelSpecVersion=eu.v0_7_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){let{baseFetch:t,batch:r,blockIdentifier:n,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:d}=e||{};Object.values(ec).includes(s)?this.nodeUrl=nF(s,e?.default,this.channelSpecVersion):s?this.nodeUrl=s:this.nodeUrl=nF(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||ey.get("fetch")||nD,this.blockIdentifier=n??nG.blockIdentifier,this.chainId=a,this.headers={...nG.headers,...i},this.retries=o??nG.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=d??!1,this.requestId=0,"number"==typeof r&&(this.batchClient=new eY({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),e_.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:eq(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new nO(r,e,t);if(n instanceof nN)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(nc(this.channelSpecVersion,e)||e_.error(eg.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!nl(e))throw new nN(`${eg.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){let r=e4(e),n=new nU(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=e4(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new nU(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=e4(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=e4(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=e4(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:i=!0}=t,s=new nU(r).identifier,o=[];return n&&o.push(a.vn.SKIP_VALIDATE),i&&o.push(a.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:o})}async waitForTransaction(e,t){let r,n=e4(e),{retries:i}=this,s=!1,o=!1,c=t?.retryInterval??this.transactionRetryIntervalDefault,l=t?.errorStates??[a.sI.REJECTED],d=t?.successStates??[a.If.SUCCEEDED,a.sI.ACCEPTED_ON_L2,a.sI.ACCEPTED_ON_L1];for(;!s;){await nB(c);try{let e=(r=await this.getTransactionStatus(n)).execution_status,t=r.finality_status;if(!t)throw Error("waiting for transaction status");if(l.includes(e)||l.includes(t)){let n=`${e}: ${t}`,a=Error(n);throw a.response=r,o=!0,a}(d.includes(e)||d.includes(t))&&(s=!0)}catch(e){if(e instanceof Error&&o)throw e;if(i<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}i-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(n)}catch(e){if(i<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}i-=1,await nB(c)}return u}getStorageAt(e,t,r=this.blockIdentifier){let n=e4(e),a=e9(t),i=new nU(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let r=e4(e),n=new nU(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){let r=e4(e),n=new nU(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){let r=e4(e),n=new nU(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){let n=new nU(t).identifier,i={simulation_flags:r?[a.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...i})}async invoke(e,t){let r;return no(t)?(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:a.wV.INVOKE,sender_address:e.contractAddress,calldata:rO.toHex(e.calldata),version:a.WY.V3,signature:ng(e.signature),nonce:e4(t.nonce),resource_bounds:t.resourceBounds,tip:e4(t.tip),paymaster_data:t.paymasterData.map(e=>e4(e)),account_deployment_data:t.accountDeploymentData.map(e=>e4(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),ez(!t.maxFee,()=>{e_.warn(eg.maxFeeInV3,{type:a.wV.INVOKE})})):(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:rO.toHex(e.calldata),type:a.wV.INVOKE,max_fee:e4(t.maxFee||0),version:a.WY.V1,signature:ng(e.signature),nonce:e4(t.nonce)}}),e_.warn(eg.legacyTxWarningMessage,{version:a.WY.V1,type:a.wV.INVOKE})),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},i){let s;if(nS(e)||no(i))if(nS(e)&&!no(i))s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.wV.DECLARE,contract_class:{sierra_program:nu(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:n||"",version:a.WY.V2,max_fee:e4(i.maxFee||0),signature:ng(t),sender_address:r,nonce:e4(i.nonce)}}),e_.warn(eg.legacyTxWarningMessage,{version:a.WY.V2,type:a.wV.DECLARE});else if(nS(e)&&no(i))s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.wV.DECLARE,sender_address:r,compiled_class_hash:n||"",version:a.WY.V3,signature:ng(t),nonce:e4(i.nonce),contract_class:{sierra_program:nu(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:i.resourceBounds,tip:e4(i.tip),paymaster_data:i.paymasterData.map(e=>e4(e)),account_deployment_data:i.accountDeploymentData.map(e=>e4(e)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),ez(!i.maxFee,()=>{e_.warn(eg.maxFeeInV3,{type:a.wV.DECLARE})});else throw Error("declare unspotted parameters");else s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.wV.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:a.WY.V1,max_fee:e4(i.maxFee||0),signature:ng(t),sender_address:r,nonce:e4(i.nonce)}}),e_.warn(eg.legacyTxWarningMessage,{version:a.WY.V1,type:a.wV.DECLARE});return this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},i){let s;return no(i)?(s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:a.wV.DEPLOY_ACCOUNT,version:a.WY.V3,signature:ng(n),nonce:e4(i.nonce),contract_address_salt:e4(r||0),constructor_calldata:rO.toHex(t||[]),class_hash:e4(e),resource_bounds:i.resourceBounds,tip:e4(i.tip),paymaster_data:i.paymasterData.map(e=>e4(e)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),ez(!i.maxFee,()=>{e_.warn(eg.maxFeeInV3,{type:a.wV.DEPLOY_ACCOUNT})})):(s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:rO.toHex(t||[]),class_hash:e4(e),contract_address_salt:e4(r||0),type:a.wV.DEPLOY_ACCOUNT,max_fee:e4(i.maxFee||0),version:a.WY.V1,signature:ng(n),nonce:e4(i.nonce)}}),e_.warn(eg.legacyTxWarningMessage,{version:a.WY.V1,type:a.wV.DEPLOY_ACCOUNT})),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(e,t=this.blockIdentifier){let r=new nU(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:ty(e.entrypoint),calldata:rO.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,s={from_address:nV(r),to_address:e4(n),entry_point_selector:tm(a),payload:tc(i)},o=new nU(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r,n=nY(t);if(no(e)?(r={signature:ng(e.signature),nonce:e4(e.nonce),resource_bounds:e.resourceBounds,tip:e4(e.tip),paymaster_data:e.paymasterData.map(e=>e4(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>e4(e))},ez(!e.maxFee,()=>{e_.warn(eg.maxFeeInV3,{type:e.type,versionType:t})})):(r={signature:ng(e.signature),nonce:e4(e.nonce),max_fee:e4(e.maxFee||0)},e_.warn(eg.legacyTxWarningMessage,{version:e.version,type:e.type})),e.type===ev.INVOKE)return{type:a.wV.INVOKE,sender_address:e.contractAddress,calldata:rO.toHex(e.calldata),version:e4(e.version||n.v3),...r};if(e.type===ev.DECLARE)return nS(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:nu(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:e4(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:e4(e.version||n.v1),...r};if(e.type===ev.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:rO.toHex(e.constructorCalldata||[]),class_hash:e4(e.classHash),contract_address_salt:e4(e.addressSalt||0),version:e4(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},nX={};T(nX,{RpcChannel:()=>nZ});var nJ={headers:{"Content-Type":"application/json"},blockIdentifier:eS.PENDING,retries:200},nZ=class{id="RPC081";channelSpecVersion=eu.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){let{baseFetch:t,batch:r,blockIdentifier:n,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:d}=e||{};Object.values(ec).includes(s)?this.nodeUrl=nF(s,e?.default,this.channelSpecVersion):s?this.nodeUrl=s:this.nodeUrl=nF(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||ey.get("fetch")||nD,this.blockIdentifier=n??nJ.blockIdentifier,this.chainId=a,this.headers={...nJ.headers,...i},this.retries=o??nJ.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=d??!1,this.requestId=0,"number"==typeof r&&(this.batchClient=new eY({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),e_.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:eq(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new nO(r,e,t);if(n instanceof nN)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(nc(this.channelSpecVersion,e)||e_.error(eg.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!nl(e))throw new nN(`${eg.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){let t=e4(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],r=[],n=this.blockIdentifier){let a=new nU(n).identifier,i=ta(e),s=ta(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:a,class_hashes:i,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(e){let t=e4(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){let r=e4(e),n=new nU(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new nU(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=e4(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new nU(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=e4(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=e4(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=e4(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:a=!0}=t,i=new nU(r).identifier,o=[];return n&&o.push(s.vn.SKIP_VALIDATE),a&&o.push(s.vn.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:o})}async waitForTransaction(e,t){let r,n=e4(e),{retries:a}=this,i=!1,o=!1,c=t?.retryInterval??this.transactionRetryIntervalDefault,l=t?.errorStates??[s.sI.REJECTED],d=t?.successStates??[s.If.SUCCEEDED,s.sI.ACCEPTED_ON_L2,s.sI.ACCEPTED_ON_L1];for(;!i;){await nB(c);try{let e=(r=await this.getTransactionStatus(n)).execution_status,t=r.finality_status;if(!t)throw Error("waiting for transaction status");if(l.includes(e)||l.includes(t)){let n=`${e}: ${t}`,a=Error(n);throw a.response=r,o=!0,a}(d.includes(e)||d.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&o)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(n)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await nB(c)}return u}getStorageAt(e,t,r=this.blockIdentifier){let n=e4(e),a=e9(t),i=new nU(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let r=e4(e),n=new nU(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){let r=e4(e),n=new nU(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){let r=e4(e),n=new nU(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){let n=new nU(t).identifier,a={simulation_flags:r?[s.vn.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...a})}async invoke(e,t){let r;if(no(t))if(eV(t.resourceBounds))r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:s.wV.INVOKE,sender_address:e.contractAddress,calldata:rO.toHex(e.calldata),version:s.WY.V3,signature:ng(e.signature),nonce:e4(t.nonce),resource_bounds:t.resourceBounds,tip:e4(t.tip),paymaster_data:t.paymasterData.map(e=>e4(e)),account_deployment_data:t.accountDeploymentData.map(e=>e4(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(eg.SWOldV3);else throw Error(eg.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},a){let i;if(nS(e)&&no(a))if(eV(a.resourceBounds))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:s.wV.DECLARE,sender_address:r,compiled_class_hash:n||"",version:s.WY.V3,signature:ng(t),nonce:e4(a.nonce),contract_class:{sierra_program:nu(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:e4(a.tip),paymaster_data:a.paymasterData.map(e=>e4(e)),account_deployment_data:a.accountDeploymentData.map(e=>e4(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error(eg.SWOldV3);else throw Error(eg.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},a){let i;if(no(a))if(eV(a.resourceBounds))i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:s.wV.DEPLOY_ACCOUNT,version:s.WY.V3,signature:ng(n),nonce:e4(a.nonce),contract_address_salt:e4(r||0),constructor_calldata:rO.toHex(t||[]),class_hash:e4(e),resource_bounds:a.resourceBounds,tip:e4(a.tip),paymaster_data:a.paymasterData.map(e=>e4(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error(eg.SWOldV3);else throw Error(eg.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let r=new nU(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:ty(e.entrypoint),calldata:rO.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,s={from_address:nV(r),to_address:e4(n),entry_point_selector:tm(a),payload:tc(i)},o=new nU(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r,n=nY(t);if(no(e))r={signature:ng(e.signature),nonce:e4(e.nonce),resource_bounds:e.resourceBounds,tip:e4(e.tip),paymaster_data:e.paymasterData.map(e=>e4(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>e4(e))};else throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(e.type===ev.INVOKE)return{type:s.wV.INVOKE,sender_address:e.contractAddress,calldata:rO.toHex(e.calldata),version:e4(e.version||n.v3),...r};if(e.type===ev.DECLARE){if(!nS(e.contract))throw e_.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:nu(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:e4(e.version||n.v3),...r}}if(e.type===ev.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:rO.toHex(e.constructorCalldata||[]),class_hash:e4(e.classHash),contract_address_salt:e4(e.addressSalt||0),version:e4(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},nQ=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||"undefined"!=typeof global&&global.WebSocket,class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return ny(e,this.margin?.maxFee)}estimateFeeToBounds(e){return nm(e,this.margin?.bounds)}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateResponse(e){let t=e[0];return{overall_fee:e5(t.overall_fee),unit:t.unit,l1_gas_consumed:e3(t.l1_gas_consumed)??e3(t.gas_consumed)??0n,l1_gas_price:e3(t.l1_gas_price)??e3(t.gas_price)??0n,l2_gas_consumed:e3(t.l2_gas_consumed)??void 0,l2_gas_price:e3(t.l2_gas_price)??void 0,l1_data_gas_consumed:e3(t.l1_data_gas_consumed)??e3(t.data_gas_consumed)??0n,l1_data_gas_price:e3(t.l1_data_gas_price)??e3(t.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t)}}parseFeeEstimateBulkResponse(e){return e.map(e=>({overall_fee:e5(e.overall_fee),unit:e.unit,l1_gas_consumed:e3(e.l1_gas_consumed)??e3(e.gas_consumed)??0n,l1_gas_price:e3(e.l1_gas_price)??e3(e.gas_price)??0n,l2_gas_consumed:e3(e.l2_gas_consumed)??void 0,l2_gas_price:e3(e.l2_gas_price)??void 0,l1_data_gas_consumed:e3(e.l1_data_gas_consumed)??e3(e.data_gas_consumed)??0n,l1_data_gas_price:e3(e.l1_data_gas_price)??e3(e.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e)}))}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:e1(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}}),n0=class e{statusReceipt;value;constructor(t){for(let[r]of([this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,r,{enumerable:!1});for(let[e,r]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:r})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return e.execution_status===eA.SUCCEEDED}static isReverted(e){return e.execution_status===eA.REVERTED}};T({},{encodeData:()=>aa,encodeType:()=>at,encodeValue:()=>an,getDependencies:()=>ae,getMessageHash:()=>as,getStructHash:()=>ai,getTypeHash:()=>ar,isMerkleTreeType:()=>n7,prepareSelector:()=>n9,validateTypedData:()=>n8,verifyMessage:()=>ao}),T({},{MerkleTree:()=>n1,proofMerklePath:()=>function e(t,r,n,a=r1){if(0===n.length)return t===r;let[i,...s]=n;return e(t,n1.hash(r,i,a),s,a)}});var n1=class e{leaves;branches=[];root;hashMethod;constructor(e,t=r1){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);let r=[];for(let n=0;n<t.length;n+=2)n+1===t.length?r.push(e.hash(t[n],"0x0",this.hashMethod)):r.push(e.hash(t[n],t[n+1],this.hashMethod));return this.build(r)}static hash(e,t,r=r1){let[n,a]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return r(n,a)}getProof(t,r=this.leaves,n=[]){let a=r.indexOf(t);if(-1===a)throw Error("leaf not found");if(1===r.length)return n;let i=a%2==0,s=(i?r[a+1]:r[a-1])??"0x0",o=[...n,s],c=this.leaves.length===r.length?-1:this.branches.findIndex(e=>e.length===r.length),l=this.branches[c+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),l,o)}},n2={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},n6={[l.K.ACTIVE]:{domain:"StarknetDomain",hashMethod:r3,hashMerkleMethod:r2,escapeTypeString:e=>`"${e}"`,presetTypes:n2},[l.K.LEGACY]:{domain:"StarkNetDomain",hashMethod:r5,hashMerkleMethod:r1,escapeTypeString:e=>e,presetTypes:{}}};function n5(e,t,{min:r,max:n}){let a=BigInt(e);eG(a>=r&&a<=n,`${a} (${t}) is out of bounds [${r}, ${n}]`)}function n3({types:e,domain:t}){return n6[l.K.ACTIVE].domain in e&&t.revision?.toString()===l.K.ACTIVE?l.K.ACTIVE:n6[l.K.LEGACY].domain in e&&(t.revision??l.K.LEGACY)===l.K.LEGACY?l.K.LEGACY:void 0}function n4(e){try{return e4(e)}catch(t){if(e1(e))return e4(tN(e));throw Error(`Invalid BigNumberish: ${e}`)}}function n8(e){return!!(e.message&&e.primaryType&&e.types&&n3(e))}function n9(e){return e6(e)?e:ty(e)}function n7(e){return"merkletree"===e.type}function ae(e,t,r=[],n="",a=l.K.LEGACY){let i=[t];return"*"===t[t.length-1]?i=[t.slice(0,-1)]:a===l.K.ACTIVE&&("enum"===t?i=[n]:t.match(/^\(.*\)$/)&&(i=t.slice(1,-1).split(",").map(e=>"*"===e[e.length-1]?e.slice(0,-1):e))),i.filter(t=>!r.includes(t)&&e[t]).reduce((t,r)=>[...t,...[r,...e[r].reduce((t,r)=>[...t,...ae(e,r.type,t,r.contains,a).filter(e=>!t.includes(e))],[])].filter(e=>!t.includes(e))],[])}function at(e,t,r=l.K.LEGACY){let n=r===l.K.ACTIVE?{...e,...n6[r].presetTypes}:e,[a,...i]=ae(n,t,void 0,void 0,r),s=a?[a,...i.sort()]:[],o=n6[r].escapeTypeString;return s.map(e=>{let t=n[e].map(e=>{let t="enum"===e.type&&r===l.K.ACTIVE?e.contains:e.type,n=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map(e=>e?o(e):e).join(",")})`:o(t);return`${o(e.name)}:${n}`});return`${o(e)}(${t})`}).join("")}function ar(e,t,r=l.K.LEGACY){return ty(at(e,t,r))}function an(e,t,r,n={},a=l.K.LEGACY){if(e[t])return[t,ai(e,t,r,a)];if(n6[a].presetTypes[t])return[t,ai(n6[a].presetTypes,t,r,a)];if(t.endsWith("*")){let n=r.map(r=>an(e,t.slice(0,-1),r,void 0,a)[1]);return[t,n6[a].hashMethod(n)]}switch(t){case"enum":if(a===l.K.ACTIVE){let[i,s]=Object.entries(r)[0],o=e[n.parent].find(e=>e.name===n.key),c=e[o.contains],l=c.find(e=>e.name===i),d=c.indexOf(l),u=l.type.slice(1,-1).split(",").map((t,r)=>t?an(e,t,s[r],void 0,a)[1]:t);return[t,n6[a].hashMethod([d,...u])]}return[t,n4(r)];case"merkletree":{let t=function(e,t){if(t.parent&&t.key){let r=e[t.parent].find(e=>e.name===t.key);if(!n7(r))throw Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}(e,n),{root:i}=new n1(r.map(r=>an(e,t,r,void 0,a)[1]),n6[a].hashMerkleMethod);return["felt",i]}case"selector":return["felt",n9(r)];case"string":if(a===l.K.ACTIVE){let e=tV(r),n=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,n6[a].hashMethod(n)]}return[t,n4(r)];case"i128":if(a===l.K.ACTIVE){let e=BigInt(r);return n5(e,t,Q),[t,n4(e<0n?G+e:e)]}return[t,n4(r)];case"timestamp":case"u128":return a===l.K.ACTIVE&&n5(r,t,ee),[t,n4(r)];case"felt":case"shortstring":return a===l.K.ACTIVE&&n5(n4(r),t,Z),[t,n4(r)];case"ClassHash":case"ContractAddress":return a===l.K.ACTIVE&&n5(r,t,Z),[t,n4(r)];case"bool":return a===l.K.ACTIVE&&eG(eQ(r),`Type mismatch for ${t} ${r}`),[t,n4(r)];default:if(a===l.K.ACTIVE)throw Error(`Unsupported type: ${t}`);return[t,n4(r)]}}function aa(e,t,r,n=l.K.LEGACY){let[a,i]=(e[t]??n6[n].presetTypes[t]).reduce(([a,i],s)=>{if(void 0===r[s.name]||null===r[s.name]&&"enum"!==s.type)throw Error(`Cannot encode data: missing data for '${s.name}'`);let o=r[s.name],c={parent:t,key:s.name},[l,d]=an(e,s.type,o,c,n);return[[...a,l],[...i,d]]},[["felt"],[ar(e,t,n)]]);return[a,i]}function ai(e,t,r,n=l.K.LEGACY){return n6[n].hashMethod(aa(e,t,r,n)[1])}function as(e,t){if(!n8(e))throw Error("Typed data does not match JSON schema");let r=n3(e),{domain:n,hashMethod:a}=n6[r];return a([tN("StarkNet Message"),ai(e.types,n,e.domain,r),t,ai(e.types,e.primaryType,e.message,r)])}function ao(e,t,r,n){let a=n8(e);if(!tp(e)&&!a)throw Error("message has a wrong format.");if(a&&void 0===n)throw Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(a&&!tp(n))throw Error("accountAddress shall be a BigNumberish");let i=a?as(e,n):e4(e),s=Array.isArray(t)?new p.Signature(BigInt(t[0]),BigInt(t[1])):t,o=e4(r);return p.verify(s,i,o)}var ac=class{responseParser;channel;constructor(e){if(e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new nQ;else{if(e&&e.specVersion)if(nc("0.8",e.specVersion))this.channel=new nX.RpcChannel({...e,waitMode:!1});else if(nc("0.7",e.specVersion))this.channel=new eb.RpcChannel({...e,waitMode:!1});else throw Error(`unsupported channel for spec version: ${e.specVersion}`);else if(nc("0.8",ey.get("rpcVersion")))this.channel=new nX.RpcChannel({...e,waitMode:!1});else if(nc("0.7",ey.get("rpcVersion")))this.channel=new eb.RpcChannel({...e,waitMode:!1});else throw Error("unable to define spec version for channel");this.responseParser=new nQ(e?.feeMarginPercentage)}}static async create(e){let t=new eb.RpcChannel({...e}),r=await t.getSpecVersion();if(nl(r)||e_.warn(`Using incompatible node spec version ${r}`),nc("0.7",r))return new this({...e,specVersion:eu.v0_7_1});if(nc("0.8",r))return new this({...e,specVersion:eu.v0_8_1});throw new nN(`Provided RPC node specification version ${r} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(eu).toString()}`)}fetch(e,t,r=0){return this.channel.fetch(e,t,r)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if(e===eS.LATEST)return;let r=await this.getBlockNumber(),n=e===eS.PENDING?r+1:Number(e4(e));if(n<=r)return;let{retries:a}=this.channel,i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===n?s=!0:await nB(t),(i-=1)<=0)throw Error(`waitForBlock() timed-out after ${a} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){let t=await this.channel.getTransactionByHash(e);eG("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");let{calldata:r,contract_address:n,entry_point_selector:a,nonce:i}=t;return t_([r[0],n,i,a,r.length-1,...r.slice(1)])}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){let t=await this.channel.getTransactionReceipt(e);return new n0(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){return new n0(await this.channel.waitForTransaction(e,t))}async getStorageAt(e,t,r){return this.channel.getStorageAt(e,t,r)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:r=this.channel.blockIdentifier,compiler:n=!0}={}){let a;if(e)a=await this.getClassAt(e,r);else if(t)a=await this.getClass(t,r);else throw Error("getContractVersion require contractAddress or classHash");return nS(a)?n?{cairo:"1",compiler:t7(a.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:ev.INVOKE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:ev.DECLARE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:ev.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,r,n,a){let i,s=n8(e);if(!tp(e)&&!s)throw Error("message has a wrong format.");if(!tp(r))throw Error("accountAddress shall be a BigNumberish");let o=s?as(e,r):e4(e),c=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};for(let e of n?[n]:["isValidSignature","is_valid_signature"])try{let n=await this.callContract({contractAddress:e4(r),entrypoint:e,calldata:rO.compile({hash:e5(o).toString(),signature:np(t)})});if(c.nokResponse.includes(n[0].toString()))return!1;if(0===c.okResponse.length||c.okResponse.includes(n[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(c.error.some(t=>e.message.includes(t)))return!1;i=e}throw Error(`Signature verification Error: ${i}`)}async isClassDeclared(e,t){let r;if(!e.classHash&&"contract"in e)r=nI(e).classHash;else if(e.classHash)r=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(r,t) instanceof Object}catch(e){if(e instanceof nN)return!1;throw e}}async prepareInvocations(e){let t=[];for(let r of e)r.type===ev.DECLARE?await this.isClassDeclared("payload"in r?r.payload:r)||t.unshift(r):t.push(r);return t}async getL1MessagesStatus(e){if(this.channel instanceof nX.RpcChannel)return this.channel.getMessagesStatus(e);throw new nN("Unsupported method for RPC version")}async getStorageProof(e,t,r,n){if(this.channel instanceof nX.RpcChannel)return this.channel.getStorageProof(e,t,r,n);throw new nN("Unsupported method for RPC version")}async getCompiledCasm(e){if(this.channel instanceof nX.RpcChannel)return this.channel.getCompiledCasm(e);throw new nN("Unsupported method for RPC version")}};T({},{StarknetIdContract:()=>a_,StarknetIdIdentityContract:()=>aE,StarknetIdMulticallContract:()=>aw,StarknetIdPfpContract:()=>aI,StarknetIdPopContract:()=>aC,StarknetIdVerifierContract:()=>aT,dynamicCallData:()=>aV,dynamicFelt:()=>ax,execution:()=>aO,getStarknetIdContract:()=>ab,getStarknetIdIdentityContract:()=>av,getStarknetIdMulticallContract:()=>aA,getStarknetIdPfpContract:()=>ak,getStarknetIdPopContract:()=>aN,getStarknetIdVerifierContract:()=>aS,isStarkDomain:()=>aD,useDecoded:()=>ay,useEncoded:()=>am});var al="abcdefghijklmnopqrstuvwxyz0123456789-",ad=BigInt(al.length+1),au="这来",ah=BigInt(al.length),ap=BigInt(au.length),af=BigInt(au.length+1);function ag(e){let t=0;for(;e.endsWith(au[au.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function ay(e){let t="";return(e.forEach(e=>{for(;e!==K;){let r=e%ad;if(e/=ad,r===BigInt(al.length)){let r=e/af;if(r===K){let n=e%af;e=r,n===K?t+=al[0]:t+=au[Number(n)-1]}else t+=au[Number(e%ap)],e/=ap}else t+=al[Number(r)]}let[r,n]=ag(t);n&&(t=r+(n%2==0?au[au.length-1].repeat(n/2-1)+au[0]+al[1]:au[au.length-1].repeat((n-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function am(e){let t=BigInt(0),r=BigInt(1);if(e.endsWith(au[0]+al[1])){let[t,r]=ag(e.substring(0,e.length-2));e=t+au[au.length-1].repeat(2*(r+1))}else{let[t,r]=ag(e);r&&(e=t+au[au.length-1].repeat(1+2*(r-1)))}for(let n=0;n<e.length;n+=1){let a=e[n],i=al.indexOf(a),s=BigInt(al.indexOf(a));-1!==i?n===e.length-1&&e[n]===al[0]?(t+=r*ah,r*=ad*ad):(t+=r*s,r*=ad):-1!==au.indexOf(a)&&(t+=r*ah,r*=ad,t+=r*BigInt(+(n===e.length-1)+au.indexOf(a)),r*=ap)}return t}var a_={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function ab(e){switch(e){case el.SN_MAIN:return a_.MAINNET;case el.SN_SEPOLIA:return a_.TESTNET_SEPOLIA;default:throw Error("Starknet.id is not yet deployed on this network")}}var aE={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function av(e){switch(e){case el.SN_MAIN:return aE.MAINNET;case el.SN_SEPOLIA:return aE.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var aw="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function aA(e){switch(e){case el.SN_MAIN:case el.SN_SEPOLIA:return aw;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var aT={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function aS(e){switch(e){case el.SN_MAIN:return aT.MAINNET;case el.SN_SEPOLIA:return aT.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var aI={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function ak(e){switch(e){case el.SN_MAIN:return aI.MAINNET;case el.SN_SEPOLIA:return aI.TESTNET_SEPOLIA;default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var aC={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function aN(e){switch(e){case el.SN_MAIN:return aC.MAINNET;case el.SN_SEPOLIA:return aC.TESTNET_SEPOLIA;default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function aO(e,t,r){return new ra({Static:e,IfEqual:t?rr(t[0],t[1],t[2]):void 0,IfNotEqual:r?rr(r[0],r[1],r[2]):void 0})}function ax(e,t){return new ra({Hardcoded:e,Reference:t?rr(t[0],t[1]):void 0})}function aV(e,t,r){return new ra({Hardcoded:e,Reference:t?rr(t[0],t[1]):void 0,ArrayReference:r?rr(r[0],r[1]):void 0})}function aD(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}var aB=class e{async getStarkName(t,r){return e.getStarkName(this,t,r)}async getAddressFromStarkName(t,r){return e.getAddressFromStarkName(this,t,r)}async getStarkProfile(t,r,n,a,i,s,o){return e.getStarkProfile(this,t,r,n,a,i,s,o)}static async getStarkName(e,t,r){let n=await e.getChainId(),a=r??ab(n);try{let r=(await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:rO.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1),n=ay(r);if(!n)throw Error("Starkname not found");return n}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,r){let n=t.endsWith(".stark")?t:`${t}.stark`;if(!aD(n))throw Error("Invalid domain, must be a valid .stark domain");let a=await e.getChainId(),i=r??ab(a);try{let t=n.replace(".stark","").split(".").map(e=>am(e).toString(10));return(await e.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:rO.compile({domain:t,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,r,n,a,i,s,o){let c=await e.getChainId(),l=r??ab(c),d=n??av(c),u=a??aS(c),h=i??ak(c),p=s??aN(c),f=o??aA(c);try{let r=[{execution:aO({}),to:aV(l),selector:aV(ty("address_to_domain")),calldata:[aV(t),aV("0")]},{execution:aO({}),to:ax(l),selector:ax(ty("domain_to_id")),calldata:[aV(void 0,void 0,[0,0])]},{execution:aO({}),to:ax(d),selector:ax(ty("get_verifier_data")),calldata:[aV(void 0,[1,0]),aV(tN("twitter")),aV(u),aV("0")]},{execution:aO({}),to:ax(d),selector:ax(ty("get_verifier_data")),calldata:[aV(void 0,[1,0]),aV(tN("github")),aV(u),aV("0")]},{execution:aO({}),to:ax(d),selector:ax(ty("get_verifier_data")),calldata:[aV(void 0,[1,0]),aV(tN("discord")),aV(u),aV("0")]},{execution:aO({}),to:ax(d),selector:ax(ty("get_verifier_data")),calldata:[aV(void 0,[1,0]),aV(tN("proof_of_personhood")),aV(p),aV("0")]},{execution:aO({}),to:ax(d),selector:ax(ty("get_verifier_data")),calldata:[aV(void 0,[1,0]),aV(tN("nft_pp_contract")),aV(h),aV("0")]},{execution:aO({}),to:ax(d),selector:ax(ty("get_extended_verifier_data")),calldata:[aV(void 0,[1,0]),aV(tN("nft_pp_id")),aV("2"),aV(h),aV("0")]},{execution:aO(void 0,void 0,[6,0,0]),to:ax(void 0,[6,0]),selector:ax(ty("tokenURI")),calldata:[aV(void 0,[7,1]),aV(void 0,[7,2])]}],n=await e.callContract({contractAddress:f,entrypoint:"aggregate",calldata:rO.compile({calls:r})});if(Array.isArray(n)){let e=parseInt(n[0],16),t=[],r=1;for(let a=0;a<e;a+=1)if(r<n.length){let e=parseInt(n[r],16);r+=1;let a=n.slice(r,r+e);t.push(a),r+=e}else break;let a=ay(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0],l=("0x9"===n[0]?t[8].slice(1).map(e=>tO(e)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`;return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:c,profilePicture:l}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},aP=class extends(0,b.c_)(ac,aB){},aR=new ac({default:!0}),aF=class{pk;constructor(e=p.utils.randomPrivateKey()){this.pk=e instanceof Uint8Array?D(e):e4(e)}async getPubKey(){return p.getStarkKey(this.pk)}async signMessage(e,t){let r=as(e,t);return this.signRaw(r)}async signTransaction(e,t){let r,n=nW(e,t.cairoVersion);if(Object.values(I.ETransactionVersion2).includes(t.version))r=rZ({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(I.ETransactionVersion3).includes(t.version))r=rZ({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:nb(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:nb(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){let t,r=rO.compile(e.constructorCalldata);if(Object.values(I.ETransactionVersion2).includes(e.version))t=r0({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(I.ETransactionVersion3).includes(e.version))t=r0({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:nb(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nb(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(I.ETransactionVersion2).includes(e.version))t=rQ({...e,version:e.version});else if(Object.values(I.ETransactionVersion3).includes(e.version))t=rQ({...e,version:e.version,nonceDataAvailabilityMode:nb(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nb(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return p.sign(e,this.pk)}};function aL(e){return new tF(e).toBigInt()}function aM(e){return tF.is(e)}function a$(e){return new tF(e).toUint256HexString()}function aU(e){let t=function(e){let t=B(e4(e1(e)?P(e):e)).padStart(64,"0");return P(t)}(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw Error("Invalid Address Format");return tr(t,K,X-1n,"Starknet Address"),t}function aH(e){return"event"===e.type}function aj(e){return t8(e)?function(e){let t=e.filter(e=>aH(e)&&"struct"===e.kind),r=e.filter(e=>aH(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let n=[],{name:a}=t,i=!1,s=e=>e.type===a;for(;;){let e=r.find(e=>e.variants.some(s));if(eJ(e))break;let t=e.variants.find(s);n.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===n.length)throw Error("inconsistency in ABI events definition.");i&&(n=[n[n.length-1]]);let o=n.pop(),c={[P(p.keccak(O(o)).toString(16))]:t};for(;n.length>0;)c={[P(p.keccak(O(n.pop())).toString(16))]:c};return function e(t,r){let n={...t};return e2(t)&&e2(r)&&Object.keys(r).forEach(a=>{e2(r[a])&&a in t?n[a]=e(t[a],r[a]):Object.assign(n,{[a]:r[a]})}),n}(e,c={...c})},{})}(e):e.filter(e=>"event"===e.type).reduce((e,t)=>{let r=t.name,n={...t};return n.name=r,{...e,[P(p.keccak(O(r)).toString(16))]:n}},{})}function aK(e,t,r,n){return e.flat().reduce((e,a)=>{let i=JSON.parse(JSON.stringify(a)),s=t[i.keys.shift()??0];if(!s)return e;for(;!s.name;){let e=i.keys.shift();eG(!!e,'Not enough data in "keys" property of this event.'),s=s[e]}let o={};o[s.name]={};let c=i.keys[Symbol.iterator](),l=i.data[Symbol.iterator](),d=s.members?.filter(e=>"key"===e.kind)||s.keys,u=s.members?.filter(e=>"data"===e.kind)||s.data;return d.forEach(e=>{o[s.name][e.name]=rv(c,e,r,n,o[s.name])}),u.forEach(e=>{o[s.name][e.name]=rv(l,e,r,n,o[s.name])}),"block_hash"in i&&(o.block_hash=i.block_hash),"block_number"in i&&(o.block_number=i.block_number),"transaction_hash"in i&&(o.transaction_hash=i.transaction_hash),e.push(o),e},[])}function aW(e){if(!e.events?.length)throw Error("UDC emitted event is empty");let t=e.events.find(e=>tt(e.from_address)===tt(et.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}function aq(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function aY(e){let t=e.calldata??[],r=Array.isArray(t)?t:rO.compile(t);return{to:e.contractAddress,selector:ty(e.entrypoint),calldata:r}}function aG(e,t){let r=aY(e);return"1"===t?{...r,calldata_len:r.calldata.length,calldata:r.calldata}:{To:r.to,Selector:r.selector,Calldata:r.calldata}}function az(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,..."2"===t?{revision:"1"}:{}}}function aX(e,t,r,n,a){return"1"===a?{types:e$,primaryType:"OutsideExecution",domain:az(e,a),message:{...t,nonce:r,calls_len:n.length,calls:n.map(e=>aG(e,a))}}:{types:eU,primaryType:"OutsideExecution",domain:az(e,a),message:{Caller:t.caller,Nonce:r,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:n.map(e=>aG(e,a))}}}function aJ(e){let t=e.outsideExecution,r=np(e.signature);return rO.compile({outside_execution:t,signature:r})}function aZ(e){return(Array.isArray(e)?e:[e]).map(e=>{let t;if(e.version===eH.V1)t="execute_from_outside";else if(e.version===eH.V2)t="execute_from_outside_v2";else throw Error("Unsupported OutsideExecution version");return{contractAddress:e4(e.signerAddress),entrypoint:t,calldata:aJ(e)}})}async function aQ(e,t,r){let n={contractAddress:e4(t),entrypoint:"supports_interface",calldata:[e4(r)]};try{let t=await e.callContract(n);return 0n!==BigInt(t[0])}catch{return!1}}T({},{bnToUint256:()=>a$,isUint256:()=>aM,uint256ToBN:()=>aL}),T({},{getAbiEvents:()=>aj,isAbiEvent:()=>aH,parseEvents:()=>aK,parseUDCEvent:()=>aW}),T({},{buildExecuteFromOutsideCall:()=>aZ,buildExecuteFromOutsideCallData:()=>aJ,getOutsideCall:()=>aY,getTypedData:()=>aX,toOutsideCallV2:()=>aq}),T({},{supportsInterface:()=>aQ}),T({},{assertCallsAreStrictlyEqual:()=>a1,assertPaymasterTransactionSafety:()=>a2,getDefaultPaymasterNodeUrl:()=>a0});var a0=(e,t=!1)=>{t||e_.info("Using default public node url, please provide nodeUrl in provider options!");let r=ef[e??ec.SN_SEPOLIA],n=Math.floor(Math.random()*r.length);return r[n]};function a1(e,t){let r="Provided calls are not strictly equal to the returned calls";eG(t.length-1===e.length,`${r}: Expected ${e.length+1} calls, got ${t.length}`);for(let n=0;n<e.length;n+=1){let a=e[n],i=aq(t[n]),s=e=>e5(e).toString(16).toLowerCase();eG(s(a.contractAddress)===s(i.To),`${r}: Contract address mismatch at call ${n}. Expected: ${a.contractAddress}, Got: ${i.To}`),eG(ty(a.entrypoint)===i.Selector,`${r}: Entrypoint mismatch at call ${n}. Expected: ${a.entrypoint}, Got: ${i.Selector}`);let o=rO.toCalldata(a.calldata),c=rO.toCalldata(i.Calldata);eG(o.length===c.length,`${r}: Calldata length mismatch at call ${n}. Expected length: ${o.length}, Got length: ${c.length}`);for(let e=0;e<o.length;e+=1)eG(BigInt(o[e])===BigInt(c[e]),`${r}: Calldata value mismatch at call ${n}, parameter ${e}. Expected: ${o[e]}, Got: ${c[e]}`)}}var a2=(e,t,r,n)=>{if("sponsored"!==r.feeMode.mode&&("invoke"===e.type||"deploy_and_invoke"===e.type)){let a="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;a1(t,a),((e,t)=>{eG(BigInt(aq(e[e.length-1]).To)===BigInt(t),"Gas token address is not equal to the provided gas token")})(a,r.feeMode.gasToken),n&&(eG(e.fee.suggested_max_fee_in_gas_token<=n,"Gas token price is too high"),((e,t)=>{let r=aq(e[e.length-1]);eG(BigInt(rO.toCalldata(r.Calldata)[1])===BigInt(t),"Gas token value is not equal to the provided gas fees")})(a,e.fee.suggested_max_fee_in_gas_token))}},a6=e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},a5=e=>e?{execute_after:e.executeAfter||1,execute_before:e.executeBefore}:void 0,a3=e=>({version:e.version,feeMode:(e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gasToken:e.gas_token})(e.fee_mode),timeBounds:(e=>e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)(e.time_bounds)}),a4={headers:{"Content-Type":"application/json"}},a8=class e{nodeUrl;headers;baseFetch;requestId;constructor(t){if(t instanceof e){this.nodeUrl=t.nodeUrl,this.headers={...a4.headers,...t.headers},this.baseFetch=t.baseFetch,this.requestId=t.requestId;return}if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t){this.nodeUrl=t.nodeUrl??a0(void 0),this.headers={...a4.headers,...t.headers},this.baseFetch=t.baseFetch??nD,this.requestId=0;return}let{nodeUrl:r,headers:n,baseFetch:a}=t||{};r&&Object.values(ec).includes(r)?this.nodeUrl=a0(r,t?.default):r?this.nodeUrl=r:this.nodeUrl=a0(void 0,t?.default),this.baseFetch=a??nD,this.headers={...a4.headers,...n},this.requestId=0}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:eq(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new nO(r,e,t);if(n instanceof nN)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{this.requestId+=1;let r=await this.fetch(e,t,this.requestId),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,calls:e.invoke.calls.map(e=>({to:e.contractAddress,selector:ty(e.entrypoint),calldata:rO.toHex(e.calldata)}))}};break;default:r=e}let n={version:t.version,fee_mode:a6(t.feeMode),time_bounds:a5(t.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:n}),i={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:a3(a.parameters),fee:i};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:a3(a.parameters),fee:i};default:return{type:"deploy",deployment:a.deployment,parameters:a3(a.parameters),fee:i}}}async executeTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:ng(e.invoke.signature)}};break;default:r=e}let n={version:t.version,fee_mode:a6(t.feeMode),time_bounds:a5(t.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:n})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(e=>e.map(e=>({token_address:e.token_address,decimals:e.decimals,priceInStrk:BigInt(e.price_in_strk)})))}},a9=new a8({default:!0}),a7=class extends aP{signer;address;cairoVersion;transactionVersion;paymaster;constructor(e,t,r,n,a=ey.get("transactionVersion"),i){super(e),this.address=t.toLowerCase(),this.signer=e1(r)||r instanceof Uint8Array?new aF(r):r,n&&(this.cairoVersion=n.toString()),this.transactionVersion=a,this.paymaster=i?new a8(i):a9,e_.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new nN("Not supported")}getPreferredVersion(e,t){return this.transactionVersion===eI.V3?t:this.transactionVersion===eI.V2?e:eI.V3}async getNonce(e){return super.getNonceForAddress(this.address,e)}async getNonceSafe(e){try{return e5(e??await this.getNonce())}catch(e){return 0n}}async getCairoVersion(e){if(!this.cairoVersion){let{cairo:t}=e?await super.getContractVersion(void 0,e):await super.getContractVersion(this.address);this.cairoVersion=t}return this.cairoVersion}async estimateFee(e,t={}){return this.estimateInvokeFee(e,t)}async estimateInvokeFee(e,t={}){let{nonce:r,blockIdentifier:n,version:a,skipValidate:i=!0}=t,s=Array.isArray(e)?e:[e],o=e5(r??await this.getNonce()),c=nE(this.getPreferredVersion(eI.F1,eI.F3),nv(a)),l=await this.getChainId(),d={...nw(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:o,maxFee:K,version:c,chainId:l,cairoVersion:await this.getCairoVersion(),skipValidate:i},u=await this.buildInvocation(s,d);return super.getInvokeEstimateFee({...u},{...nw(t,await this.channel.setUpSpecVersion()),version:c,nonce:o},n,t.skipValidate)}async estimateDeclareFee(e,t={}){let{blockIdentifier:r,nonce:n,version:a,skipValidate:i=!0}=t,s=e5(n??await this.getNonce()),o=nE(nS(e.contract)?this.getPreferredVersion(eI.F2,eI.F3):eI.F1,nv(a)),c=await this.getChainId(),l=await this.buildDeclarePayload(e,{...nw(t,await this.channel.setUpSpecVersion()),nonce:s,chainId:c,version:o,walletAddress:this.address,maxFee:K,cairoVersion:void 0,skipValidate:i});return super.getDeclareEstimateFee(l,{...nw(t,await this.channel.setUpSpecVersion()),version:o,nonce:s},r,t.skipValidate)}async estimateAccountDeployFee({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},a={}){let{blockIdentifier:i,version:s,skipValidate:o=!0}=a,c=nE(this.getPreferredVersion(eI.F1,eI.F3),nv(s)),l=await this.getChainId(),d=await this.buildAccountDeployPayload({classHash:e,addressSalt:t,constructorCalldata:r,contractAddress:n},{...nw(a,await this.channel.setUpSpecVersion()),nonce:K,chainId:l,version:c,walletAddress:this.address,maxFee:K,cairoVersion:void 0,skipValidate:o});return super.getDeployAccountEstimateFee({...d},{...nw(a,await this.channel.setUpSpecVersion()),version:c,nonce:K},i,a.skipValidate)}async estimateDeployFee(e,t={}){let r=this.buildUDCContractPayload(e);return this.estimateInvokeFee(r,t)}async estimateFeeBulk(e,t={}){if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:r,blockIdentifier:n,version:a,skipValidate:i}=t,s=await this.accountInvocationsFactory(e,{...nw(t,await this.channel.setUpSpecVersion()),versions:[eI.F1,nE(this.getPreferredVersion(eI.F2,eI.F3),a)],nonce:r,blockIdentifier:n,skipValidate:i});return super.getEstimateFeeBulk(s,{blockIdentifier:n,skipValidate:i})}async simulateTransaction(e,t={}){if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:r,blockIdentifier:n,skipValidate:a=!0,skipExecute:i,version:s}=t,o=await this.accountInvocationsFactory(e,{...nw(t,await this.channel.setUpSpecVersion()),versions:[eI.V1,nE(this.getPreferredVersion(eI.V2,eI.V3),s)],nonce:r,blockIdentifier:n,skipValidate:a});return super.getSimulateTransaction(o,{blockIdentifier:n,skipValidate:a,skipExecute:i})}async execute(e,t={}){let r=Array.isArray(e)?e:[e],n=e5(t.nonce??await this.getNonce()),a=nE(this.getPreferredVersion(eI.V1,eI.V3),t.version),i=await this.getUniversalSuggestedFee(a,{type:ev.INVOKE,payload:e},{...t,version:a}),s=await this.getChainId(),o={...nw(t,await this.channel.setUpSpecVersion()),resourceBounds:i.resourceBounds,walletAddress:this.address,nonce:n,maxFee:i.maxFee,version:a,chainId:s,cairoVersion:await this.getCairoVersion()},c=await this.signer.signTransaction(r,o),l=nW(r,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:l,signature:c},{...nw(t,await this.channel.setUpSpecVersion()),resourceBounds:i.resourceBounds,nonce:n,maxFee:i.maxFee,version:a})}async buildPaymasterTransaction(e,t){let r;if(!t.deploymentData&&await this.getSnip9Version()===eH.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");let n={version:"0x1",feeMode:t.feeMode,timeBounds:t.timeBounds};return r=t.deploymentData?e.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:e},deployment:t.deploymentData}:{type:"deploy",deployment:t.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:e}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(e,t){return(await this.buildPaymasterTransaction(e,t)).fee}async preparePaymasterTransaction(e){let t;switch(e.type){case"deploy_and_invoke":{let r=await this.signMessage(e.typed_data);t={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:ng(r)},deployment:e.deployment};break}case"invoke":{let r=await this.signMessage(e.typed_data);t={type:"invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:ng(r)}};break}case"deploy":t={type:"deploy",deployment:e.deployment};break;default:throw Error("Invalid transaction type")}return t}async executePaymasterTransaction(e,t,r){let n=await this.buildPaymasterTransaction(e,t);a2(n,e,t,r);let a=await this.preparePaymasterTransaction(n);return this.paymaster.executeTransaction(a,n.parameters).then(e=>({transaction_hash:e.transaction_hash}))}async declareIfNot(e,t={}){let r=nI(e);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(e,t)}return{transaction_hash:"",class_hash:r.classHash}}async declare(e,t={}){let r=nI(e),{nonce:n,version:a}=t,i=nE(nS(e.contract)?this.getPreferredVersion(eI.V2,eI.V3):eI.V1,a),s=await this.getUniversalSuggestedFee(i,{type:ev.DECLARE,payload:r},{...t,version:i}),o={...nw(t,await this.channel.setUpSpecVersion()),resourceBounds:s.resourceBounds,maxFee:s.maxFee,nonce:e5(n??await this.getNonce()),version:i,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},c=await this.buildDeclarePayload(r,o);return this.declareContract(c,o)}async deploy(e,t={}){let{calls:r,addresses:n}=nq(e,this.address);return{...await this.execute(r,t),contract_address:n}}async deployContract(e,t={}){let r=await this.deploy(e,t);return aW(await this.waitForTransaction(r.transaction_hash))}async declareAndDeploy(e,t={}){let{constructorCalldata:r,salt:n,unique:a}=e,i=await this.declareIfNot(e,t);if(""!==i.transaction_hash){let e=await this.waitForTransaction(i.transaction_hash);i={...i,...e}}let s=await this.deployContract({classHash:i.class_hash,salt:n,unique:a,constructorCalldata:r},t);return{declare:{...i},deploy:s}}deploySelf=this.deployAccount;async deployAccount({classHash:e,constructorCalldata:t=[],addressSalt:r=0,contractAddress:n},a={}){let i=nE(this.getPreferredVersion(eI.V1,eI.V3),a.version),s=await this.getChainId(),o=rO.compile(t),c=n??r4(r,e,o,0),l=await this.getUniversalSuggestedFee(i,{type:ev.DEPLOY_ACCOUNT,payload:{classHash:e,constructorCalldata:o,addressSalt:r,contractAddress:c}},a),d=await this.signer.signDeployAccountTransaction({...nw(a,await this.channel.setUpSpecVersion()),classHash:e,constructorCalldata:o,contractAddress:c,addressSalt:r,chainId:s,resourceBounds:l.resourceBounds,maxFee:l.maxFee,version:i,nonce:K});return this.deployAccountContract({classHash:e,addressSalt:r,constructorCalldata:t,signature:d},{...nw(a,await this.channel.setUpSpecVersion()),nonce:K,resourceBounds:l.resourceBounds,maxFee:l.maxFee,version:i})}async signMessage(e){return this.signer.signMessage(e,this.address)}async hashMessage(e){return as(e,this.address)}async getSnip9Version(){return await aQ(this,this.address,ea)?eH.V2:await aQ(this,this.address,en)?eH.V1:eH.UNSUPPORTED}async isValidSnip9Nonce(e){try{let t={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[e4(e)]},r=await this.callContract(t);return 0n!==BigInt(r[0])}catch(e){throw Error(`Failed to check if nonce is valid: ${e}`)}}async getSnip9Nonce(){let e=nh();return await this.isValidSnip9Nonce(e)?e:this.getSnip9Nonce()}async getOutsideTransaction(e,t,r,n){if(!e6(e.caller)&&"ANY_CALLER"!==e.caller)throw Error(`The caller ${e.caller} is not valid.`);let a=e6(e.caller)?e.caller:er,i=Array.isArray(t)?t:[t],s=r??await this.getSnip9Version();if(!s)throw Error("This account is not handling outside transactions.");let o=n?e4(n):await this.getSnip9Nonce(),c=aX(await this.getChainId(),{caller:a,execute_after:e.execute_after,execute_before:e.execute_before},o,i,s),l=await this.signMessage(c);return{outsideExecution:{caller:a,nonce:o,execute_after:e.execute_after,execute_before:e.execute_before,calls:i.map(aY)},signature:l,signerAddress:this.address,version:s}}async executeFromOutside(e,t){let r=aZ(e);return this.execute(r,t)}async getUniversalSuggestedFee(e,{type:t,payload:r},n){let a=0,i=nm(K,void 0,await this.channel.setUpSpecVersion());return e===eI.V3?i=n.resourceBounds??(await this.getSuggestedFee({type:t,payload:r},n)).resourceBounds:a=n.maxFee??(await this.getSuggestedFee({type:t,payload:r},n)).suggestedMaxFee,{maxFee:a,resourceBounds:i}}async getSuggestedFee({type:e,payload:t},r){switch(e){case ev.INVOKE:return this.estimateInvokeFee(t,r);case ev.DECLARE:return this.estimateDeclareFee(t,r);case ev.DEPLOY_ACCOUNT:return this.estimateAccountDeployFee(t,r);case ev.DEPLOY:return this.estimateDeployFee(t,r);default:return n_(await this.channel.setUpSpecVersion())}}async buildInvocation(e,t){let r=nW(e,await this.getCairoVersion()),n=t.skipValidate?[]:await this.signer.signTransaction(e,t);return{...nw(t,await this.channel.setUpSpecVersion()),contractAddress:this.address,calldata:r,signature:n}}async buildDeclarePayload(e,t){let{classHash:r,contract:n,compiledClassHash:a}=nI(e),i=nR(n);if(eJ(a)&&(t.version===eC.F3||t.version===eC.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");let s=t.skipValidate?[]:await this.signer.signDeclareTransaction({...t,...nw(t,await this.channel.setUpSpecVersion()),classHash:r,compiledClassHash:a,senderAddress:t.walletAddress});return{senderAddress:t.walletAddress,signature:s,contract:i,compiledClassHash:a}}async buildAccountDeployPayload({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},a){let i=rO.compile(r),s=n??r4(t,e,i,0),o=a.skipValidate?[]:await this.signer.signDeployAccountTransaction({...a,...nw(a,await this.channel.setUpSpecVersion()),classHash:e,contractAddress:s,addressSalt:t,constructorCalldata:i});return{...nw(a,await this.channel.setUpSpecVersion()),classHash:e,addressSalt:t,constructorCalldata:i,signature:o}}buildUDCContractPayload(e){return[].concat(e).map(e=>{let{classHash:t,salt:r="0",unique:n=!0,constructorCalldata:a=[]}=e,i=rO.compile(a);return{contractAddress:et.ADDRESS,entrypoint:et.ENTRYPOINT,calldata:[t,r,tl(n),i.length,...i]}})}async accountInvocationsFactory(e,t){let{nonce:r,blockIdentifier:n,skipValidate:a=!0}=t,i=await this.getNonceSafe(r),s=await this.getChainId(),o=t.versions.map(e=>nE(e)),c="payload"in e[0]?e[0].payload:e[0],l=e[0].type===ev.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(e).map(async(e,r)=>{let c="payload"in e?e.payload:e,d={...nw(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:e5(Number(i)+r),maxFee:K,chainId:s,cairoVersion:l,version:"",skipValidate:a},u={type:e.type,nonce:e5(Number(i)+r),blockIdentifier:n,version:""};if(e.type===ev.INVOKE){let e=nA(o[1]);d.version=e,u.version=e;let t=await this.buildInvocation([].concat(c),d);return{...u,...t,...d}}if(e.type===ev.DEPLOY){let e=nA(o[1]);d.version=e,u.version=e;let t=this.buildUDCContractPayload(c),r=await this.buildInvocation(t,d);return{...u,...r,...d,type:ev.INVOKE}}if(e.type===ev.DECLARE){let e=nS(c.contract)?o[1]:o[0];d.version=e,u.version=e;let t=await this.buildDeclarePayload(c,d);return{...u,...t,...d}}if(e.type===ev.DEPLOY_ACCOUNT){let e=nA(o[1]);d.version=e,u.version=e;let t=await this.buildAccountDeployPayload(c,d);return{...u,...t,...d}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${e}`)}))}async getStarkName(e=this.address,t){return super.getStarkName(e,t)}};function ie(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function it(e){return e.request({type:"wallet_getPermissions"})}function ir(e,t){return e.request({type:"wallet_watchAsset",params:t})}function ia(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function ii(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function is(e){return e.request({type:"wallet_requestChainId"})}function io(e){return e.request({type:"wallet_deploymentData"})}function ic(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function il(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function id(e,t){return e.request({type:"wallet_signTypedData",params:t})}function iu(e){return e.request({type:"wallet_supportedSpecs"})}function ih(e,t){e.on("accountsChanged",t)}function ip(e,t){e.on("networkChanged",t)}T({},{addDeclareTransaction:()=>il,addInvokeTransaction:()=>ic,addStarknetChain:()=>ia,deploymentData:()=>io,getPermissions:()=>it,onAccountChange:()=>ih,onNetworkChanged:()=>ip,requestAccounts:()=>ie,requestChainId:()=>is,signMessage:()=>id,supportedSpecs:()=>iu,switchStarknetChain:()=>ii,watchAsset:()=>ir});var ig=class e extends a7{walletProvider;constructor(e,t,r,n,a){super(e,r,"",n,void 0,a),this.walletProvider=t,this.walletProvider.on("accountsChanged",e=>{e&&(this.address=e[0].toLowerCase())}),this.walletProvider.on("networkChanged",e=>{e&&this.channel.setChainId(e)})}onAccountChange(e){ih(this.walletProvider,e)}onNetworkChanged(e){ip(this.walletProvider,e)}requestAccounts(e=!1){return ie(this.walletProvider,e)}getPermissions(){return it(this.walletProvider)}switchStarknetChain(e){return ii(this.walletProvider,e)}watchAsset(e){return ir(this.walletProvider,e)}addStarknetChain(e){return ia(this.walletProvider,e)}execute(e){let t=[].concat(e).map(e=>{let{contractAddress:t,entrypoint:r,calldata:n}=e;return{contract_address:t,entry_point:r,calldata:n}});return ic(this.walletProvider,{calls:t})}declare(e){let t=nI(e),r=e.contract,n={...r,abi:eq(r.abi)};if(!t.compiledClassHash)throw Error("compiledClassHash is required");let a={compiled_class_hash:t.compiledClassHash,contract_class:n};return il(this.walletProvider,a)}async deploy(e){let{calls:t,addresses:r}=nq(e,this.address);return{...await this.execute(t),contract_address:r}}signMessage(e){return id(this.walletProvider,e)}static async connect(t,r,n,a,i=!1){let[s]=await ie(r,i);return new e(t,r,s,n,a)}static async connectSilent(t,r,n,a){return e.connect(t,r,n,a,!0)}};function iy(e,t){return async function(...r){let n={...e.contractOptions};return e.contractOptions=void 0,e.call(t.name,r,{parseRequest:!0,parseResponse:!0,...n})}}function im(e,t){return"view"===t.stateMutability||"view"===t.state_mutability?iy(e,t):async function(...r){let n={...e.contractOptions};return e.contractOptions=void 0,e.invoke(t.name,r,{parseRequest:!0,...n})}}function i_(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var ib=class{abi;address;providerOrAccount;deployTransactionHash;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;contractOptions;constructor(e,t,r=aR){this.address=t&&t.toLowerCase(),this.providerOrAccount=r,this.callData=new rO(e),this.structs=rO.getAbiStruct(e),this.events=aj(e);let n=rh(e);this.abi=n.getLegacyFormat();let a={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(e=>{var t,r;if("function"!==e.type)return;let n=e.name;this[n]||Object.defineProperty(this,n,{...a,value:im(this,e)}),this.functions[n]||Object.defineProperty(this.functions,n,{...a,value:im(this,e)}),this.callStatic[n]||Object.defineProperty(this.callStatic,n,{...a,value:iy(this,e)}),this.populateTransaction[n]||Object.defineProperty(this.populateTransaction,n,{...a,value:(t=this,function(...r){return t.populate(e.name,r)})}),this.estimateFee[n]||Object.defineProperty(this.estimateFee,n,{...a,value:(r=this,function(...t){return r.estimate(e.name,t)})})})}withOptions(e){return this.contractOptions=e,this}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e,t=[],{parseRequest:r=!0,parseResponse:n=!0,formatResponse:a,blockIdentifier:i}={}){eG(null!==this.address,"contract is not connected to an address");let s=i_(t,()=>r?(this.callData.validate(eP.CALL,e,t),this.callData.compile(e,t)):(e_.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:s,entrypoint:e},i).then(t=>n?a?this.callData.format(e,t,a):this.callData.parse(e,t):t)}invoke(e,t=[],{parseRequest:r=!0,signature:n,...a}={}){eG(null!==this.address,"contract is not connected to an address");let i=i_(t,()=>r?(this.callData.validate(eP.INVOKE,e,t),this.callData.compile(e,t)):(e_.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),s={contractAddress:this.address,calldata:i,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(s,{...a});if(!a.nonce)throw Error("Nonce is required when invoking a function without an account");return e_.warn(`Invoking ${e} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...s,signature:n},{...a,nonce:a.nonce})}async estimate(e,t=[]){eG(null!==this.address,"contract is not connected to an address"),i_(t,()=>!1)||this.callData.validate(eP.INVOKE,e,t);let r=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(r);throw Error("Contract must be connected to the account contract to estimate")}populate(e,t=[]){let r=i_(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:r}}parseEvents(e){let t;return e.match({success:e=>{t=aK(e.events?.map(t=>({block_hash:e.block_hash,block_number:e.block_number,transaction_hash:e.transaction_hash,...t})).filter(e=>tt(e.from_address)===tt(this.address),[])||[],this.events,this.structs,rO.getAbiEnum(this.abi))},_:()=>{throw Error("This transaction was not successful.")}}),t}isCairo1(){return tD.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}}}}]);